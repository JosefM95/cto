

    
<div class="form-group mt-3">
      <label class="mb-0" for="input">${{transposition.INPUT-LABEL}}$</label>
      <textarea spellcheck="false" rows="4" class="form-control" id="input">
${{transposition.INIT-TEXT}}$</textarea
      >
      <span id="input-len" class ="float-right length-label"></span>
    </div>

    <div class="form-group">
  
            <span id = "key-permutation" class="mb-0" for="key">${{transposition.KEY-LABEL}}$</span>


      <input
        type="text"
        class="form-control"
        id="key"
        aria-describedby="key"
        placeholder="${{transposition.PLACEHOLDER}}$"
        value="${{transposition.KEY}}$"
      />
      <span id="key-len" class ="float-right length-label"></span>
   
    </div>


<div class = "row mt-2 ml-auto" id = "modeSwitch">
        <label class="mr-2 left-switch-label" for="cryptCheckbox">${{transposition.ENCIPHER}}$</label>
         <div class="custom-control custom-switch" id = "cryptCheckboxWrapper">
       
        <input type="checkbox" class="custom-control-input" id="cryptCheckbox">
        <label class="custom-control-label right-switch-label" for="cryptCheckbox">${{transposition.DECIPHER}}$</label>
        </div>
        </div>
        
    <!--start card-->
    <div class="card mt-2">
      <div class="card-header">
        <ul
          class="nav nav-tabs card-header-tabs"
          id="cmdOptions"
          role="tablist"
        >
          <li class="nav-item">
            <a
              class="nav-link active"
              href="#options"
              role="tab"
              aria-controls="options"
              aria-selected="true"
            >
              <i class="fa fa-cog mr-2" aria-hidden="true"></i> ${{transposition.OPTIONS}}$</a
            >
          </li>
          <li class="nav-item">
              <a class="nav-link"  href="#choseAlphabet" role="tab" aria-controls="choseAlphabet" aria-selected="false"><i class="fa fa-font mr-2" aria-hidden="true"></i>Alphabet</a>
            </li>
          <li class="nav-item">

            <a
              class="nav-link"
              href="#grid"
              role="tab"
              aria-controls="grid"
              aria-selected="false"
              ><i class="fa fa-table" aria-hidden="true"></i>
${{transposition.SHOW-GRID}}$</a
            >
          </li>
           
        </ul>
      </div>
      <div class="card-body">
      <!--content for every tab-->
      
      <!--content for every tab-->
        <div class="tab-content">
        <!-- options tab start-->
          <div class="tab-pane active" id="options" role="tabpanel">
            <p class="card-text">
          
        <div class="custom-control custom-checkbox mr-3" style="display: inline-block">
            <input type="checkbox" class="custom-control-input" id="addFiveBlocksCodeCheckbox">
            <label class="custom-control-label" for="addFiveBlocksCodeCheckbox">${{transposition.FIVE-BLOCKS}}$</label>
        </div>
        <div class="custom-control custom-checkbox mr-3" style="display: inline-block">
            <input type="checkbox" class="custom-control-input" id="removeSpaces" >
            <label class="custom-control-label" for="removeSpaces">${{transposition.REMOVE-SPACES}}$</label>
        </div>

         <div class="custom-control custom-checkbox mr-3" style="display: inline-block">
            <input type="checkbox" class="custom-control-input" id="casesensitive" >
            <label class="custom-control-label" for="casesensitive">${{transposition.CASESENSITIVE}}$</label>
        </div>
   
     <div class="custom-control custom-checkbox custom-control-inline" style="display: inline-block">
            <input type="checkbox" class="custom-control-input" id="replaceChar" >
            <label class="custom-control-label align-middle" for="replaceChar">${{transposition.REPLACE-SPACES}}$</label> <input type="text" class="custom-control custom-checkbox custom-control-inline" id="charForReplace" value="X" size="1" maxlength="1" disabled>
        </div>


            </p>
          </div>
                  <!-- options tab end-->
                          
    <!-- alphabet tab start-->
            <div class="tab-pane" id="choseAlphabet" role="tabpanel" aria-labelledby="choseAlphabet-tab">  
              <p class="card-text">
              
              
             
                    <label class="mb-0">${{transposition.ALPHABET-LABEL}}$</label>
                    <textarea
                        rows="1"
                        wrap="soft"
                        class="mt-1 form-control"
                        id="alphabet"
                        spellcheck="false"
                        disabled
                    >
                ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz</textarea
                    >
     
      <!--alphabet templates-->
      <div class="alphabetTemplates">
        <div class="custom-control custom-checkbox mr-3" style="display: inline-block">
            <input type="checkbox" class="custom-control-input" id="uppercaseAlphabet">
            <label class="custom-control-label" for="uppercaseAlphabet">${{transposition.UPPERCASE}}$</label>
        </div>

        <div class="custom-control custom-checkbox mr-3" style="display: inline-block">
            <input type="checkbox" class="custom-control-input" id="lowercaseAlphabet">
            <label class="custom-control-label" for="lowercaseAlphabet">${{transposition.LOWERCASE}}$</label>
        </div>

        <div class="custom-control custom-checkbox mr-3" style="display: inline-block">
            <input type="checkbox" class="custom-control-input" id="digitsAlphabet">
            <label class="custom-control-label" for="digitsAlphabet">${{transposition.DIGITS}}$</label>
        </div>

        <div class="custom-control custom-checkbox mr-3" style="display: inline-block">
            <input type="checkbox" class="custom-control-input" id="punctuationAlphabet">
            <label class="custom-control-label" for="punctuationAlphabet">${{transposition.PUNCTUATION-MARKS}}$</label>
        </div>
    
         <div class="custom-control custom-checkbox mr-3" style="display: inline-block">
            <input type="checkbox" class="custom-control-input"  id="specialCharacters">
            <label class="custom-control-label" for="specialCharacters">${{transposition.SPECIALCHARACTERS}}$</label>
        </div>

         <div class="custom-control custom-checkbox mr-3" style="display: inline-block">
            <input type="checkbox" class="custom-control-input" id="umlautsAlphabet">
            <label class="custom-control-label" for="umlautsAlphabet">${{transposition.UMLAUTS}}$</label>
        </div>
        
        <div class="custom-control custom-checkbox mr-3" style="display: inline-block">
            <input type="checkbox" class="custom-control-input" id="blanksAlphabet">
            <label class="custom-control-label" for="blanksAlphabet">${{transposition.BLANKS}}$ </label>
        </div>

      </div>
      <!--end alphabet templates-->
      <!--radiobuttons-->
  <hr style="border:1px solid grey;">
      <div>
        
        
        <div class="custom-control custom-radio mr-3" style="display: inline-block">
            <input type="radio" id="putTogetherAlphabet" name="customRadio" class="custom-control-input">
            <label class="custom-control-label ml-1" for="putTogetherAlphabet">${{transposition.CREATE-ALPHABET}}$</label>
        </div>

        <div class="custom-control custom-radio mr-3" style="display: inline-block">
            <input type="radio" id="defineOwnAlphabet" name="customRadio" class="custom-control-input">
            <label class="custom-control-label ml-1" for="defineOwnAlphabet">${{transposition.DEFINE-OWN-ALPHABET}}$</label>
        </div>

        </div>
        </p>
            
            </div>

<!--start grid tab-->
          <div
            class="tab-pane"
            id="grid"
            role="tabpanel"
            aria-labelledby="history-tab"
          >
            <p class="card-text text-center">
            <small id ="maxTenRows" style="color:red;text-align:center;">${{transposition.MAX-TEN-ROWS}}$</small>
            <div style="overflow-x:auto;">
              <table border="1" style="display: table; margin: 0 auto;text-align:center" class="table table-bordered table-sm table-striped">
                <tr id="keyOrder">
                    
                </tr>
                <tr id="keyNumberInAlpOrder">
                  
                </tr>  
                <tbody id="textToGrid"> </tbody>
            </table>
            </div>
            </p>
            
          </div>
         
    

        </div>
      </div>
    </div>
    <!--end card-->
    <!--row-->
    <div class="row mt-2">
      <div class="col-lg-4 col-md-6 col-sm-7 col-8">
        <button class="btn btn-success col-12" id="operationForCode">
          <span class="spinner-border spinner-border-sm mr-2" role="status" aria-hidden="true"></span>${{transposition.PYTHON-LOADING}}$
        </button>
      </div>

      <!--checkbox nonalp-->
    </div>
    <!--end row-->
    <div class="mt-2 textareaWrapper" id="">
      <pre class="mt-4 mb-2 p-2 alert alert-dark" id="cmdLine">
python transpostion.py <span class = "badge badge-light " id = "mod">--encrypt</span> <span class = "badge badge-light ">--message</span> <span  id = "-m">'${{transposition.INIT-TEXT}}$'</span> <span class = "badge badge-light ">--key</span> <span  id ="-k">'${{transposition.KEY}}$'</span> <span class="badge badge-light ">--alphabet</span> <span  id="-a">''</span> <span class = "badge badge-light " id = "cs">--case-sensitive</span> <span class = "badge badge-light " id = "fiveblock" hidden></span> <span class = "badge badge-light " id = "removeSpacesCMD" hidden></span> <span class = "badge badge-light " hidden id = "-replaceCharCMD">--replace-char</span> <span   hidden id = "-rc">''</span></pre>
      <textarea class="CodeMirror" id="yourcode">
import math
import sys
import argparse
from itertools import chain
import re

def encrypt_message(message, key, b_case_sensitive ,b_remove_spaces, replace_char, b_blocks_of_five, alphabet):
    if(replace_char):
        message = message.replace(' ', replace_char)

    if(b_remove_spaces):
        message = message.replace(' ', '')

    #escape all regex special characters in alphabet
    alphabet = re.escape(alphabet)
    dic = "[^{}]".format(alphabet)
    message = re.sub( dic, "" , message)
    key = re.sub( dic, "" , key)

    encrypted_message = ""
    message = list(message)
    ciphertext = []
    column = []
    #if case sensitive is false, then set key to lowercase
    if(not b_case_sensitive):
        key = key.upper()
    # get every nth el and append to a column
    for i in range(len(key)):
        column.append(message[i::len(key)])
    # sort key based on the defined alphabet
    dictKey = {}
    for x in range(len(key)):
        dictKey[x] = key[x]
    sorted_key = sorted(dictKey.items(), key=lambda pair: alphabet.index(pair[1]), reverse=False)
    # append the columns based on the alphabetic order of the key
    for num in range(len(key)):
        encrypted_message += "".join(column[sorted_key[num][0]])
    
    if(b_blocks_of_five):
        # delete spaces
        encrypted_message = list(encrypted_message.replace(' ',''))
        k = ' '
        N = 5
        # insert every N th element k
        encrypted_message = ''.join(list(chain(*[encrypted_message[i : i+N] + [k] 
            if len(encrypted_message[i : i+N]) == N 
            else encrypted_message[i : i+N] 
            for i in range(0, len(encrypted_message), N)])))
    
    return encrypted_message
  

# Decryption 
def decrypt_message(cipher, key, alphabet, b_case_sensitive): 
    decrypted_message = ""
    # calculate the number of rows in matrix
    rows = math.ceil(len(cipher) / len(key))
    # calculate the number of placeholders in the last row
    diff = rows * len(key) - len(cipher)
    empty_matrix = [""] * len(key)
    #if case sensitive is false, then set key to lowercase
    if(not b_case_sensitive):
        key = key.upper()
    
    #escape all regex special characters in alphabet
    alphabet = re.escape(alphabet)
    dic = "[^{}]".format(alphabet)
    #remove non-alphabetic symbols in message and key
    cipher = re.sub( dic, "" , cipher)
    key = re.sub( dic, "" , key)

    # sort key based on the defined alphabet
    dictKey = {}
    for x in range(len(key)):
        dictKey[x] = key[x]
    sorted_key = sorted(dictKey.items(), key=lambda pair: alphabet.index(pair[1]), reverse=False)
    #pointer that point on the row to insert char
    row_pointer = 0
    #pointer that point on the cahr in text
    char_pointer = 0
    for i in range(len(sorted_key)):
        col = sorted_key[i][0]
        #if col is bigger than keylength minus diff it means that in this row is a placeholder on the last row
        if(col >= len(key) - diff):
            rowsMax = rows - 1
        else:
            rowsMax = rows
        for z in range(rowsMax):
            if(char_pointer == len(cipher)):
                break
            empty_matrix[col] += cipher[char_pointer]
            char_pointer += 1

    #get every first,second and so on element from column in matrix
    decrypted_message = ''
    for row in range(rows):
        for i in range(len(key)):
            if(row &lt; len(empty_matrix[i])):
                decrypted_message += empty_matrix[i][row]
            
    return(decrypted_message)
	

if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument("-a", "--alphabet", help="alphabet for key and inut-tex", type=str)
    parser.add_argument("-k", "--key", help="key to decrypt or encrypt", type=str)
    parser.add_argument('-e','--encrypt', dest='crypt_modus', action='store_true')
    parser.add_argument('-d','--decrypt', dest='crypt_modus', action='store_false')
    parser.add_argument('-f','--blocks-of-five', dest='blocks_of_five', action='store_true')
    parser.add_argument('-cs','--case-sensitive', dest='case_sensitive', action='store_true')
    parser.add_argument('-rs','--remove-spaces', dest='remove_spaces_mod', action='store_true')
    parser.add_argument('-rc','--replace-char', help="char for replacement", type=str)
    parser.add_argument("-m", "--message", help="char for replacement", type=str, required=True)

    if len(sys.argv) == 1:
        sys.exit(1)

    args = parser.parse_args()
    if args.crypt_modus:
        print(encrypt_message(args.message, args.key, args.case_sensitive , args.remove_spaces_mod, args.replace_char, args.blocks_of_five, args.alphabet))
    else:
        print(decrypt_message(args.message, args.key, args.alphabet, args.case_sensitive))
					</textarea
      >
    </div>
    <div
      id="alertCodeCahnge"
      class="alert alert-warning mt-2"
      role="alert"
      hidden=""
    ><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
      ${{transposition.WARNING-SECTION}}$
    </div>
    
  <div class="textareaWrapper">
      <div class="row mt-1">
        <div class="resposive-button-code col-lg-5 col-md-5 col-sm-6 col-6">
          <button class="btn btn-success mr-1" id="run-code" type="button">
            <i class="mr-2 fa fa-play" aria-hidden="true"></i>${{transposition.RUN}}$

          </button>
          <button
            class="btn btn-success"
            id="changeToDefault"
            type="button"
          >
            ${{transposition.BACK-TO-DEFALUT}}$
          </button>
          <!--<button class="btn btn-success ml-auto mr-0" id="themeConfi" >Theme</button>-->
        </div>

        <div class ="resposive-button-code col-lg-4 col-md-5 col-sm-6 col-6">
            <span>${{transposition.THEME}}$:</span>
            <div
            class="btn-group dropdown ml-1"
            >
            <button
                id="themeConfi"
                type="button"
                class="btn btn-success dropdown-toggle"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
            >
                shadowfox
            </button>
            <div
                class="dropdown-menu"
                id="dropdownTheme"
                aria-labelledby="dropdownMenuButton"
            >
                <a  class="dropdown-item">eclipse</a>
                <a  class="dropdown-item">shadowfox</a>
                <a  class="dropdown-item">yeti</a>
                <a  class="dropdown-item">solarized</a>
            </div>
            </div>
        </div>
            <div class="col-lg-3 col-md-3 col-12 mt-lg-0 mt-3">
            <span>${{transposition.FONTSIZE}}$:</span>
            <input
                class ="text-center"
                type="number"
                id="fontsize"
                name="fontsize"
                step="1"
                value="12"
                style="height: 35px; width: 65px"
            />
            </div>
       
      </div>
    </div>


    <div class="form-group mt-3 ml-auto mr-auto">
      <label id="output-label" class ="mb-0">${{transposition.OUTPUT-LABEL}}$</label>
      <textarea
        rows="4"
        class="form-control"
        spellcheck="false"
        id="output"
      ></textarea>
      <span id="output-len" class ="float-right length-label">${{transposition.LENGTH}}$: </span>
    </div>

  