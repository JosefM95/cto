<!doctype html>
<html lang="de"l>
<head>
<meta charset="utf-8">
<title>RSA-Implementierung in JavaScript</title>
<link rel="stylesheet" type="text/css" href="slides/slides.css"></head>
<body>
<h1>RSA-Implementierung in JavaScript</h1>
<div class="slides">
<div><div>
<h1>RSA-Implementierung in JavaScript</h1>
</div>

<ul><li>
 Dieses Dokument beschreibt eine vollständige Implementierung des
  RSA-Algorithmus als Web-App
</li><li>
 Sowohl der JavaScript-Code, als auch HTML und CSS können aus diesem
  Dokument mit dem Hex-Toolkit (https://github.com/itmm/hex/) generiert
  werden
</li></ul></div>

</div>
<h1>1. Datei-Struktur</h1>
<div class="slides">
<div><div>
<h1>1. Datei-Struktur</h1>
</div>

<ul><li>
 Dieser Abschnitt beschreibt die Dateien die benötigt werden
</li><li>
 Und wie sie aufgebaut werden
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">file: index-de.html</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">doctype</span> <span class="var">html</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">html</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">head</span>&gt;<br/>

<span class="in3"></span><span class="macro">@multiple(<span class="name">header</span>)</span><br/>

<span class="in2"></span>&lt;/<span class="var">head</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">body</span>&gt;<br/>

<span class="in3"></span><span class="macro">@multiple(<span class="name">rsa de</span>)</span><br/>

<span class="in3"></span><span class="macro">@multiple(<span class="name">scripts</span>)</span><br/>

<span class="in2"></span>&lt;/<span class="var">body</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">html</span>&gt;<br/>

<span class="macro">@end(<span class="name">file: index-de.html</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Datei <code>index-de.html</code> enthält die RSA-Steuerung in Deutsch
</li><li>
 Header- und Script-Fragmente werden mit der englischen Version geteilt
</li><li>
 Das Fragment <code>{rsa de}</code> wird für unsere Webseite in eine eigene Datei
  zusätzlich ausgelagert
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">file: index-en.html</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">doctype</span> <span class="var">html</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">html</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">head</span>&gt;<br/>

<span class="in3"></span><span class="macro">@multiple(<span class="name">header</span>)</span><br/>

<span class="in2"></span>&lt;/<span class="var">head</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">body</span>&gt;<br/>

<span class="in3"></span><span class="macro">@multiple(<span class="name">rsa en</span>)</span><br/>

<span class="in3"></span><span class="macro">@multiple(<span class="name">scripts</span>)</span><br/>

<span class="in2"></span>&lt;/<span class="var">body</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">html</span>&gt;<br/>

<span class="macro">@end(<span class="name">file: index-en.html</span>)</span><br/>

</code>
</div>

<ul><li>
 Die englische Webseite unterscheidet verwendet statt der deutschen
  Version das Fragment <code>{rsa en}</code>
</li><li>
 Der Rest ist identisch
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">file: ../_ctoApps/rsa/rsa-de.html</span>)</span><br/>

<span class="in1"></span><span class="macro">@multiple(<span class="name">rsa de</span>)</span><br/>

<span class="macro">@end(<span class="name">file: ../_ctoApps/rsa/rsa-de.html</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Datei <code>rsa-de.html</code> enthält die deutsche GUI ohne Webseiten-Rahmen
</li><li>
 Diese Datei wird direkt im Ziel-Ordner erzeugt
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">file: ../_ctoApps/rsa/rsa-en.html</span>)</span><br/>

<span class="in1"></span><span class="macro">@multiple(<span class="name">rsa en</span>)</span><br/>

<span class="macro">@end(<span class="name">file: ../_ctoApps/rsa/rsa-en.html</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Datei <code>rsa-en.html</code> enthält die englische GUI ohne Webseiten-Rahmen
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">header</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">title</span>&gt;<span class="var">RSA</span>-<span class="var">js</span>&lt;/<span class="var">title</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">meta</span> <span class="var">charset</span>=<span class="str">"utf-8"</span>&gt;<br/>

<span class="in1"></span><span class="macro">@expand(<span class="name">bootstrap stylesheets</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">link</span> <span class="var">rel</span>=<span class="str">"stylesheet"</span><br/>

<span class="in2"></span><span class="var">href</span>=<span class="str">"../_ctoApps/rsa/rsa.css"</span><br/>

<span class="in1"></span>&gt;<br/>

<span class="macro">@end(<span class="name">header</span>)</span><br/>

</code>
</div>

<ul><li>
 Im HTML-Header wird die Zeichen-Kodierung auf UTF-8 gestellt
</li><li>
 Die Bootstrap-Stylesheets werden eingebunden
</li><li>
 Das app-spezifische Stylesheet <code>rsa.css</code> wird eingebunden
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">file: ../_ctoApps/rsa/rsa.css</span>)</span><br/>

<span class="in1"></span><span class="macro">@expand(<span class="name">css</span>)</span><br/>

<span class="macro">@end(<span class="name">file: ../_ctoApps/rsa/rsa.css</span>)</span><br/>

</code>
</div>

<ul><li>
 Das Stylesheet enthält ein Fragment <code>{css}</code>
</li><li>
 Wenn neue HTML-Elemente eine CSS-Anpassung benötigen, werden diese
  hier eingepflegt
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">scripts</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">script</span><br/>

<span class="in2"></span><span class="var">src</span>=<span class="str">"../_ctoApps/rsa/BigInteger.min.js"</span><br/>

<span class="in1"></span>&gt;&lt;/<span class="var">script</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">script</span><br/>

<span class="in2"></span><span class="var">src</span>=<span class="str">"../_ctoApps/rsa/rsa.js"</span>&gt;&lt;/<span class="var">script</span>&gt;<br/>

<span class="macro">@end(<span class="name">scripts</span>)</span><br/>

</code>
</div>

<ul><li>
 Neben dem spezifischen JavaScript wird noch eine Bibliothek für das
  Rechnen mit großen Zahlen eingebunden
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">file: ../_ctoApps/rsa/rsa.js</span>)</span><br/>

<span class="in1"></span><span class="str">"use strict"</span>;<br/>

<span class="in1"></span><span class="var">window</span>.<span class="fn">addEventListener</span>(<br/>

<span class="in2"></span><span class="str">'load'</span>,<br/>

<span class="in2"></span>() =&gt; {<br/>

<span class="in3"></span><span class="macro">@globexpand(<span class="name">globals</span>)</span>;<br/>

<span class="in3"></span><span class="macro">@expand(<span class="name">setup rsa</span>)</span>;<br/>

<span class="in2"></span>}<br/>

<span class="in1"></span>);<br/>

<span class="macro">@end(<span class="name">file: ../_ctoApps/rsa/rsa.js</span>)</span><br/>

</code>
</div>

<ul><li>
 Das Skript <code>rsa.js</code> wird mit strenger Typ-Prüfung ausgeführt
</li><li>
 Der gesamte Code wird abgearbeitet, nachdem die Webseite vollständig
  geladen wurde
</li><li>
 Der gesamte Code wird innerhalb einer JavaScript Funktion definiert
</li><li>
 Dadurch entstehen keine neuen globalen Objekte
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">rsa de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"rsa-container"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"container"</span>&gt;<br/>

<span class="in2"></span><span class="macro">@expand(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">rsa de</span>)</span><br/>

</code>
</div>

<ul><li>
 Alle HTML-Elemente des RSA-Algorithmus sind in einem eigenen
  <code>&lt;div&gt;</code>-Tag gekapselt
</li><li>
 Dadurch können Stylesheet-Anpassungen auf RSA-Elemente beschränkt
  werden
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">rsa en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"rsa-container"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"container"</span>&gt;<br/>

<span class="in2"></span><span class="macro">@expand(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">rsa en</span>)</span><br/>

</code>
</div>

<ul><li>
 Die englische Variante bindet ein anderes Fragment ein
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Dieses Modul demonstriert schrittweise</span><br/>

<span class="in2"></span><span class="str">die Ver- und Entschlüsselung mit dem</span><br/>

<span class="in2"></span><span class="str">RSA-Verfahren. Der Sender verwendet</span><br/>

<span class="in2"></span><span class="str">dabei zum Verschlüsseln den</span><br/>

<span class="in2"></span><span class="str">öffentlichen Schlüssel des Empfängers;</span><br/>

<span class="in2"></span><span class="str">der Empfänger verwendet zum</span><br/>

<span class="in2"></span><span class="str">Entschlüsseln seinen zugehörigen</span><br/>

<span class="in2"></span><span class="str">privaten Schlüssel.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Seite beginnt mit einer kurzen Beschreibung
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">This module demonstrates step-by-step</span><br/>

<span class="in2"></span><span class="str">encryption and decryption with the RSA</span><br/>

<span class="in2"></span><span class="str">method. The sender uses the public</span><br/>

<span class="in2"></span><span class="str">key of the recipient for encryption;</span><br/>

<span class="in2"></span><span class="str">the recipient uses his associated</span><br/>

<span class="in2"></span><span class="str">private key to decrypt.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Die englische Seite beginnt mit der gleichen Beschreibung
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">css</span>)</span><br/>

<span class="in1"></span>#<span class="var">rsa</span>-<span class="var">container</span> <span class="var">p</span> {<br/>

<span class="in2"></span><span class="var">margin</span>: <span class="num">0</span> <span class="num">0</span> <span class="num">10px</span> <span class="num">0</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">css</span>)</span><br/>

</code>
</div>

<ul><li>
 Für Absätze wird der Abstand auf <code>0</code> Pixel gesetzt
</li><li>
 Nur der untere Abstand wird auf <code>10</code> Pixel gesetzt
</li></ul></div>

</div>
<h1>2. Primfaktoren eingeben</h1>
<div class="slides">
<div><div>
<h1>2. Primfaktoren eingeben</h1>
</div>

<ul><li>
 Dieser Abschnitt beschreibt, wie die Primzahlen eingegeben und geändert
  werden können
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="str">Primzahlen</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Die Sicherheit von RSA basiert darauf,</span><br/>

<span class="in2"></span><span class="str">dass es zwar einfach ist, das Produkt</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt; <span class="str">zweier großer Primzahlen</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt; <span class="str">und</span> &lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt; <span class="str">zu berechnen. Es</span><br/>

<span class="in2"></span><span class="str">ist jedoch sehr schwer, nur aus dem</span><br/>

<span class="in2"></span><span class="str">Produkt</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt; <span class="str">die beiden Primzahlen</span><br/>

<span class="in2"></span><span class="str">zu bestimmen, die das Produkt ergeben.</span><br/>

<span class="in2"></span><span class="str">Dieses Zerlegen nennt man auch das</span><br/>

<span class="in2"></span><span class="str">Faktorisieren von</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Als Ausgangspunkt für RSA wählt man</span><br/>

<span class="in2"></span><span class="str">zwei Primzahlen</span> &lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt; <span class="str">und</span> &lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;<span class="str">.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Auf der HTML-Seite wird nach der Überschrift eine kurze Erklärung
  ausgegeben
</li><li>
 Mathematische Variablen werden mit dem <code>&lt;i&gt;</code>-Tag kursiv gesetzt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="type">Primes</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">The security of RSA is based on the</span><br/>

<span class="in2"></span><span class="str">fact that it is easy to calculate the</span><br/>

<span class="in2"></span><span class="str">product</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt; <span class="str">of two large primes</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt; <span class="str">and</span> &lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;. <span class="str">However, it is</span><br/>

<span class="in2"></span><span class="str">very difficult to determine only from</span><br/>

<span class="in2"></span><span class="str">the product</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt; <span class="str">the two primes</span><br/>

<span class="in2"></span><span class="str">that yield the product.  This</span><br/>

<span class="in2"></span><span class="str">decomposition is also called the</span><br/>

<span class="in2"></span><span class="str">factorization of</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;.<br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">As a starting point for RSA choose</span><br/>

<span class="in2"></span><span class="str">two primes</span> &lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt; <span class="str">and</span> &lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;.<br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Die englische Seite enthält die gleiche Erklärung
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">css</span>)</span><br/>

<span class="in1"></span>#<span class="var">rsa</span>-<span class="var">container</span> <span class="var">h2</span> {<br/>

<span class="in2"></span><span class="var">margin</span>-<span class="var">top</span>: <span class="num">2em</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">css</span>)</span><br/>

</code>
</div>

<ul><li>
 Überschriften bekommen etwas mehr Abstand
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">form</span> <span class="var">class</span>=<span class="str">"form-horizontal"</span>&gt;<br/>

<span class="in2"></span><span class="macro">@expand(<span class="name">primes de</span>)</span><br/>

<span class="in1"></span>&lt;/<span class="var">form</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Eingabe-Elemente werden in einem Formular (dem <code>&lt;form&gt;</code>-Element)
  gekapselt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">form</span> <span class="var">class</span>=<span class="str">"form-horizontal"</span>&gt;<br/>

<span class="in2"></span><span class="macro">@expand(<span class="name">primes en</span>)</span><br/>

<span class="in1"></span>&lt;/<span class="var">form</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Die englische Version unterscheidet sich nur in dem übersetzten
  Inhalt
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">primes de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">label</span> <span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in3"></span><span class="var">for</span>=<span class="str">"prime-1"</span>&gt;<span class="str">1.  Primzahl </span>&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt;<br/>

<span class="in3"></span><span class="str">=</span><br/>

<span class="in2"></span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">input</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"form-control"</span> <span class="var">id</span>=<span class="str">"prime-1"</span><br/>

<span class="in3"></span><span class="var">value</span>=<span class="str">"11"</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-p-not-prime"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"row alert alert-danger hidden"</span><br/>

<span class="in1"></span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt; <span class="str">ist keine Primzahl!</span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">primes de</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Formatierung des Eingabefeldes für die erste Primzahl mit Label
  wird von Bootstrap-Klassen erledigt
</li><li>
 Dieses Feld wird mit der kleinen Primzahl <code>11</code> initialisiert
</li><li>
 Zusätzlich gibt es eine Fehlermeldung,
</li><li>
 die aber anfangs nicht sichtbar ist
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">css</span>)</span><br/>

<span class="in1"></span>.<span class="var">hidden</span> {<br/>

<span class="in2"></span><span class="var">display</span>: <span class="var">none</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">css</span>)</span><br/>

</code>
</div>

<ul><li>
 Mit der <code>hidden</code>-Klasse können Elemente ausgeblendet werden
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">primes en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">label</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in3"></span><span class="var">for</span>=<span class="str">"prime-1"</span>&gt;<span class="str">1st prime</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt;<span class="str"> =</span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">input</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"form-control"</span><br/>

<span class="in3"></span><span class="var">id</span>=<span class="str">"prime-1"</span> <span class="var">value</span>=<span class="str">"11"</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-p-not-prime"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"row alert alert-danger hidden"</span><br/>

<span class="in1"></span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt; <span class="str">is not prime!</span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">primes en</span>)</span><br/>

</code>
</div>

<ul><li>
 Die englische Version hat ein andere Beschriftung
</li><li>
 und eine übersetzte Fehlermeldung
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">setup rsa</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="fn">queueRefresh</span> = <span class="var">event</span> =&gt; {<br/>

<span class="in2"></span><span class="var">event</span>.<span class="fn">preventDefault</span>();<br/>

<span class="in2"></span><span class="macro">@expand(<span class="name">queue refresh</span>)</span>;<br/>

<span class="in1"></span>};<br/>

<span class="macro">@end(<span class="name">setup rsa</span>)</span><br/>

</code>
</div>

<ul><li>
 Wenn sich Textfelder ändern, muss der RSA-Algorithmus neu
  durchgeführt werden
</li><li>
 Dazu wird die Funktion <code>queueRefresh</code> verwendet
</li><li>
 Diese sorgt dafür, dass die Neuberechnung nicht zu häufig
  aufgerufen wird
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">setup rsa</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="fn">refresh</span> = () =&gt; {<br/>

<span class="in2"></span><span class="macro">@expand(<span class="name">refresh</span>)</span>;<br/>

<span class="in1"></span>};<br/>

<span class="in1"></span><span class="fn">refresh</span>();<br/>

<span class="macro">@end(<span class="name">setup rsa</span>)</span><br/>

</code>
</div>

<ul><li>
 Wenn sich die Primzahl (oder andere Felder) ändern, muss der
  RSA-Algorithmus neu ausgeführt werden
</li><li>
 Beim Starten wird die Funktion aufgerufen, um alle Felder zu
  initialisieren
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">queue refresh</span>)</span><br/>

<span class="in1"></span><span class="fn">refresh</span>();<br/>

<span class="macro">@end(<span class="name">queue refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 In einer ersten Implementierung wird einfach nur die Funktion
  <code>refresh</code> aufgerufen
</li><li>
 Dieser Funktionsaufruf wird später durch eine aufwändigere
  Implementierung mit Timern ersetzt
</li></ul></div>

<div><div>
<code>

<span class="macro">@globdef(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="fn">$</span> = <span class="var">id</span> =&gt; {<br/>

<span class="in2"></span><span class="keyword">return</span> <span class="var">document</span>.<span class="fn">getElementById</span>(<span class="var">id</span>);<br/>

<span class="in1"></span>};<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Hilfsfunktion, um ein Element im HTML Document Object Model (DOM) mit
  <code>id</code> zu ermitteln
</li><li>
 Der Name wurde von jQuery übernommen
</li><li>
 Es können jedoch nur Elemente nach ihrer ID aufgelöst werden
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">prime1</span> = <span class="fn">$</span>(<span class="str">'prime-1'</span>);<br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">err_p_not_prime</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'err-p-not-prime'</span>);<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Referenzen auf das Textfeld mit der ID <code>prime-1</code> und auf die dazu
  gehörende Fehlermeldung werden zwischengespeichert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">setup rsa</span>)</span><br/>

<span class="in1"></span>$<span class="var">prime1</span>.<span class="fn">addEventListener</span>(<br/>

<span class="in2"></span><span class="str">'input'</span>, <span class="fn">queueRefresh</span><br/>

<span class="in1"></span>);<br/>

<span class="macro">@end(<span class="name">setup rsa</span>)</span><br/>

</code>
</div>

<ul><li>
 Wenn sich die Primzahl ändert, wird eine Neuberechnung angestoßen
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="var">prime1</span> =<br/>

<span class="in2"></span><span class="fn">bigInt</span>($<span class="var">prime1</span>.<span class="var">value</span>);<br/>

<br/>

<span class="in1"></span>$<span class="var">err_p_not_prime</span>.<span class="var">classList</span>.<span class="fn">toggle</span>(<br/>

<span class="in2"></span><span class="str">'hidden'</span>,<br/>

<span class="in2"></span><span class="var">prime1</span>.<span class="fn">isProbablePrime</span>()<br/>

<span class="in1"></span>);<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Der erste Primfaktor wird als Zeichenkette aus dem DOM-Modell gelesen
</li><li>
 Und in große Zahlen konvertiert
</li><li>
 Die Fehlermeldung wird sichtbar, wenn es sich vermutlich nicht um eine
  Primzahl handelt
</li><li>
 Die Entscheidung ist nicht sicher, aber dafür sehr schnell
</li><li>
 Wirkliche Auswirkungen hat es nicht, da trotzdem weiter gerechnet wird
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">primes de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">label</span> <span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in3"></span><span class="var">for</span>=<span class="str">"prime-2"</span>&gt;<span class="str">2.  Primzahl</span> &lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;<br/>

<span class="in3"></span><span class="str">=</span><br/>

<span class="in2"></span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">input</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"form-control"</span> <span class="var">id</span>=<span class="str">"prime-2"</span><br/>

<span class="in3"></span><span class="var">value</span>=<span class="str">"13"</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">primes de</span>)</span><br/>

</code>
</div>

<ul><li>
 Eingabefeld für die zweite Primzahl
</li><li>
 Auch diese wird mit einer kleinen Primzahl (<code>13</code>) initialisiert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">primes de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-q-not-prime"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"row alert alert-danger hidden"</span><br/>

<span class="in1"></span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;<span class="str"> ist keine Primzahl!</span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-p-equal-q"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"row alert alert-danger hidden"</span><br/>

<span class="in1"></span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt;<span class="str">und</span> &lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;<br/>

<span class="in2"></span><span class="str">sind nicht verschieden!</span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">primes de</span>)</span><br/>

</code>
</div>

<ul><li>
 Für die zweite Primzahl gibt es nicht nur eine Fehlermeldung,
</li><li>
 denn die beiden Primzahlen dürfen nicht gleich sein
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">primes en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">label</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in3"></span><span class="var">for</span>=<span class="str">"prime-2"</span>&gt;<span class="str">2nd prime</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;<span class="str"> =</span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">input</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"form-control"</span><br/>

<span class="in3"></span><span class="var">id</span>=<span class="str">"prime-2"</span> <span class="var">value</span>=<span class="str">"13"</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">primes en</span>)</span><br/>

</code>
</div>

<ul><li>
 In der englischen Version wird eine andere Beschriftung verwendet
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">primes en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-q-not-prime"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"row alert alert-danger hidden"</span><br/>

<span class="in1"></span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt; <span class="str">is not prime!</span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-p-equal-q"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"row alert alert-danger hidden"</span><br/>

<span class="in1"></span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt; <span class="str">and</span> &lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt; <span class="str">are not</span><br/>

<span class="in2"></span><span class="str">different!</span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">primes en</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Fehlermeldungen gibt es auch in der englischen Version
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">prime2</span> = <span class="fn">$</span>(<span class="str">'prime-2'</span>);<br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">err_q_not_prime</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'err-q-not-prime'</span>);<br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">err_p_equal_q</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'err-p-equal-q'</span>);<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Referenzen auf die zweite Primzahl und die Fehlermeldungen werden
  gespeichert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">setup rsa</span>)</span><br/>

<span class="in1"></span>$<span class="var">prime2</span>.<span class="fn">addEventListener</span>(<br/>

<span class="in2"></span><span class="str">'input'</span>, <span class="fn">queueRefresh</span><br/>

<span class="in1"></span>);<br/>

<span class="macro">@end(<span class="name">setup rsa</span>)</span><br/>

</code>
</div>

<ul><li>
 Bei einer Änderung der zweiten Primzahl wird ebenfalls eine
  Neuberechnung angestoßen
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="var">prime2</span> =<br/>

<span class="in2"></span><span class="fn">bigInt</span>($<span class="var">prime2</span>.<span class="var">value</span>);<br/>

<br/>

<span class="in1"></span>$<span class="var">err_q_not_prime</span>.<span class="var">classList</span>.<span class="fn">toggle</span>(<br/>

<span class="in2"></span><span class="str">'hidden'</span>,<br/>

<span class="in2"></span><span class="var">prime2</span>.<span class="fn">isProbablePrime</span>()<br/>

<span class="in1"></span>);<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch de zweite Primzahl wird ausgelesen
</li><li>
 Deren Fehlermeldung wird sichtbar, wenn es sich vermutlich nicht um
  eine Primzahl handelt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span>$<span class="var">err_p_equal_q</span>.<span class="var">classList</span>.<span class="fn">toggle</span>(<br/>

<span class="in2"></span><span class="str">'hidden'</span>,<br/>

<span class="in2"></span>! <span class="var">prime1</span>.<span class="fn">equals</span>(<span class="var">prime2</span>)<br/>

<span class="in1"></span>);<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Eine dritte Fehlermeldung wird sichtbar, wenn die Primzahlen
  gleich sind
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Damit der Algorithmus funktioniert,</span><br/>

<span class="in2"></span><span class="str">müssen die beiden Primzahlen</span><br/>

<span class="in2"></span><span class="str">verschieden sein.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Es wird beschrieben, dass die Primzahlen verschieden sein müssen
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">For the algorithm to work, the two</span><br/>

<span class="in2"></span><span class="str">primes must be different.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Diese Beschreibung gibt es auch in der englischen Version
</li></ul></div>

</div>
<h1>3. Öffentlicher Schlüssel</h1>
<div class="slides">
<div><div>
<h1>3. Öffentlicher Schlüssel</h1>
</div>

<ul><li>
 Im zweiten Abschnitt der Seite wird zusätzlich der Exponent abgefragt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="str">Öffentlicher Schlüssel</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Das Produkt</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt; <span class="str">wird im</span><br/>

<span class="in2"></span><span class="str">RSA-Verfahren auch Modul genannt.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Zuerst kommt eine allgemeine Beschreibung in der deutschen Version
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="str">Public key</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">The product &lt;i&gt;n&lt;/i&gt; is also called</span><br/>

<span class="in2"></span><span class="str">module in the RSA method.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Und ebenso in der englischen Version
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">definition of n</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">form</span> <span class="var">class</span>=<span class="str">"form-horizontal"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">label</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in4"></span><span class="var">for</span>=<span class="str">"public-key"</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str"> =</span><br/>

<span class="in5"></span>&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt;<span class="str"> × </span>&lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;<span class="str"> =</span><br/>

<span class="in3"></span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">p</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"form-control-static"</span><br/>

<span class="in4"></span>&gt;&lt;<span class="var">span</span> <span class="var">id</span>=<span class="str">"public-key"</span>&gt;&lt;/<span class="var">span</span>&gt;<br/>

<span class="in4"></span><span class="str">(</span>&lt;<span class="var">span</span><br/>

<span class="in4"></span><span class="var">id</span>=<span class="str">"public-key-length"</span>&gt;&lt;/<span class="var">span</span>&gt;<br/>

<span class="in4"></span><span class="str">Bit)</span>&lt;/<span class="var">p</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in2"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">form</span>&gt;<br/>

<span class="macro">@end(<span class="name">definition of n</span>)</span><br/>

</code>
</div>

<ul><li>
 <code>n</code> ist das Produkt der beiden Primfaktoren
</li><li>
 Die Anzeige ist in der deutschen und englischen Version identisch
</li><li>
 Daher wird ein eigenes Fragment definiert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span><span class="macro">@multiple(<span class="name">definition of n</span>)</span><br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Das Fragment wird in der deutschen Version verwendet
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span><span class="macro">@multiple(<span class="name">definition of n</span>)</span><br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Und das Fragment wird in der englischen Version verwendet
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">public_key</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'public-key'</span>);<br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">public_key_length</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'public-key-length'</span>);<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Referenzen auf den öffentlichen Schlüssel im DOM und dessen Länge
  werden im Code abgelegt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="var">public_key</span> =<br/>

<span class="in2"></span><span class="var">prime1</span>.<span class="fn">multiply</span>(<span class="var">prime2</span>);<br/>

<span class="in1"></span>$<span class="var">public_key</span>.<span class="var">innerText</span> =<br/>

<span class="in2"></span><span class="var">public_key</span>.<span class="fn">toString</span>();<br/>

<span class="in1"></span>$<span class="var">public_key_length</span>.<span class="var">innerText</span> =<br/>

<span class="in2"></span><span class="var">public_key</span>.<span class="fn">bitLength</span>();<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Der öffentliche Schlüssel ist das Produkt der beiden Primzahlen
</li><li>
 Die Länge des Schlüssels kann die Integer-Bibliothek direkt liefern
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Zur Demonstration beginnen wir mit</span><br/>

<span class="in2"></span><span class="str">kleinen Primzahlen. Um die</span><br/>

<span class="in2"></span><span class="str">Faktorisierung schwierig zu gestalten,</span><br/>

<span class="in2"></span><span class="str">müssen die Primzahlen viel größer</span><br/>

<span class="in2"></span><span class="str">gewählt werden. Aktuell werden für</span><br/>

<span class="in2"></span><span class="str">eine sichere Kommunikation Werte von</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt; <span class="str">mit mehreren tausend</span><br/>

<span class="in2"></span><span class="str">Binärstellen verwendet.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch wenn mit kleinen Primzahlen begonnen wird, müssen für ernste
  Anwendungen die Primzahlen groß sein
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">For demonstration we start with</span><br/>

<span class="in2"></span><span class="str">small primes. To make the</span><br/>

<span class="in2"></span><span class="str">factorization difficult, the</span><br/>

<span class="in2"></span><span class="str">primes must be much larger.</span><br/>

<span class="in2"></span><span class="str">Currently, values of</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt; <span class="str">with</span><br/>

<span class="in2"></span><span class="str">several thousand binary digits</span><br/>

<span class="in2"></span><span class="str">are used for secure communication.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Diesen Hinweis gibt es auch in der englischen Version.
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Der öffentliche Schlüssel besteht</span><br/>

<span class="in2"></span><span class="str">neben dem Modul</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt; <span class="str">noch aus</span><br/>

<span class="in2"></span><span class="str">einem Exponenten</span> &lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str">.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch der Exponent ist teil des öffentlichen Schlüssels
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">The public key consists of the</span><br/>

<span class="in2"></span><span class="str">module</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt; <span class="str">and</span><br/>

<span class="in2"></span><span class="str">an exponent</span> &lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str">.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Das wird auch in der englischen Version beschrieben.
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">form</span> <span class="var">class</span>=<span class="str">"form-horizontal"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">label</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in4"></span><span class="var">for</span>=<span class="str">"base"</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str"> =</span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">input</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"form-control"</span> <span class="var">id</span>=<span class="str">"base"</span><br/>

<span class="in4"></span><span class="var">value</span>=<span class="str">"23"</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in2"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-gcd-not-1"</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"row alert alert-danger"</span><br/>

<span class="in2"></span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt; <span class="str">und</span> &lt;<span class="var">i</span>&gt;φ(<span class="var">n</span>)&lt;/<span class="var">i</span>&gt; <span class="str">sind nicht</span><br/>

<span class="in3"></span><span class="str">teilerfremd.</span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">form</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 In einem Textfeld kann das <code>e</code> geändert werden
</li><li>
 Zusätzlich gibt es eine Fehlermeldung, wenn das eingegebene <code>e</code> nicht
  teilerfremd zu <code>φ(n)</code> ist
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">form</span> <span class="var">class</span>=<span class="str">"form-horizontal"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">label</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in4"></span><span class="var">for</span>=<span class="str">"base"</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str"> =</span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">input</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"form-control"</span> <span class="var">id</span>=<span class="str">"base"</span><br/>

<span class="in4"></span><span class="var">value</span>=<span class="str">"23"</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in2"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-gcd-not-1"</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"row alert alert-danger"</span><br/>

<span class="in2"></span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt; <span class="str">and</span> &lt;<span class="var">i</span>&gt;φ(<span class="var">n</span>)&lt;/<span class="var">i</span>&gt; <span class="str">have a common</span><br/>

<span class="in3"></span><span class="str">divisor, they are not coprime.</span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">form</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Das Textfeld gibt es ebenfalls in der englischen Version
</li><li>
 Ebenfalls mit der zugehörigen Fehlermeldung
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">e</span> = <span class="fn">$</span>(<span class="str">'base'</span>);<br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">err_gcd_not_1</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'err-gcd-not-1'</span>);<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 In der Variable <code>$e</code> wird eine Referenz des Textfelds gespeichert
</li><li>
 Ebenso wird eine Referenz der Fehlermeldung gespeichert
</li><li>
 Ob die Fehlermeldung angezeigt wird kann erst entschieden werden,
  wenn <code>φ(n)</code> berechnet wurde
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">setup rsa</span>)</span><br/>

<span class="in1"></span>$<span class="var">e</span>.<span class="fn">addEventListener</span>(<br/>

<span class="in2"></span><span class="str">'input'</span>, <span class="fn">queueRefresh</span><br/>

<span class="in1"></span>);<br/>

<span class="macro">@end(<span class="name">setup rsa</span>)</span><br/>

</code>
</div>

<ul><li>
 Werden die Primzahlen oder der Exponent geändert, wird die
  Neuberechnung getriggert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="var">e</span> = <span class="fn">bigInt</span>($<span class="var">e</span>.<span class="var">value</span>);<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Liest den Wert von <code>e</code> aus dem DOM
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Dieses</span> &lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt; <span class="str">kann sogar vorab</span><br/>

<span class="in2"></span><span class="str">gewählt werden und für alle</span><br/>

<span class="in2"></span><span class="str">Teilnehmer gleich sein.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Ein Hinweis, dass <code>e</code> öffentlich gewählt werden kann, wird
  ausgegeben
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">This</span> &lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt; <span class="str">may even be</span><br/>

<span class="in2"></span><span class="str">pre-selected and the same</span><br/>

<span class="in2"></span><span class="str">for all participants.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch in der englischen Version
</li></ul></div>

</div>
<h1>4. Geheimer Schlüssel</h1>
<div class="slides">
<div><div>
<h1>4. Geheimer Schlüssel</h1>
</div>

<ul><li>
 Beschreibt den nächsten Abschnitt in der HTML-Ausgabe
</li><li>
 und wie der geheime Schlüssel berechnet wird
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="str">Geheimer Schlüssel</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">RSA benutzt für die Berechnung des</span><br/>

<span class="in2"></span><span class="str">geheimen Schlüssels die Eulersche</span><br/>

<span class="in2"></span><span class="str">φ-Funktion von</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">.</span><br/>

<span class="in2"></span><span class="str">Diese ist definiert als</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Erklärt in der deutschen Version, wie der geheime Schlüssel berechnet
  wird
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="str">Secret key</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">RSA uses the Euler φ function</span><br/>

<span class="in2"></span><span class="str">of</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt; <span class="str">to calculate the</span><br/>

<span class="in2"></span><span class="str">secret key. This is defined as</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Das gleiche wird in der englischen Version ausgegeben
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">phi label</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">form</span> <span class="var">class</span>=<span class="str">"form-horizontal"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">label</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in4"></span><span class="var">for</span>=<span class="str">"phi"</span>&gt;<span class="str">φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">) =</span><br/>

<span class="in4"></span><span class="str">(</span>&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt;<span class="str"> − 1) ×</span><br/>

<span class="in4"></span><span class="str">(</span>&lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;<span class="str"> − 1) =</span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">p</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"form-control-static"</span><br/>

<span class="in4"></span><span class="var">id</span>=<span class="str">"phi"</span>&gt;&lt;/<span class="var">p</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in2"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">form</span>&gt;<br/>

<span class="macro">@end(<span class="name">phi label</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Berechnung von φ enthält keinen deutschen oder englischen Text
</li><li>
 und kann daher für beide Lokalisierungen verwendet werden
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span><span class="macro">@multiple(<span class="name">phi label</span>)</span><br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 φ in der deutschen Version definieren
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span><span class="macro">@multiple(<span class="name">phi label</span>)</span><br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 φ in der englischen Version definieren
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">phi</span> = <span class="fn">$</span>(<span class="str">'phi'</span>);<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Eine Referenz auf den Wert der φ-Funktion wird im Code abgelegt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="var">one</span> = <span class="fn">bigInt</span>.<span class="var">one</span>;<br/>

<span class="in1"></span><span class="type">const</span> <span class="var">phi</span> = <span class="var">prime1</span>.<span class="fn">subtract</span>(<span class="var">one</span>).<br/>

<span class="in2"></span><span class="fn">multiply</span>(<span class="var">prime2</span>.<span class="fn">subtract</span>(<span class="var">one</span>));<br/>

<span class="in1"></span>$<span class="var">phi</span>.<span class="var">innerText</span> = <span class="var">phi</span>.<span class="fn">toString</span>();<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Nur wenn die Primzahlen verschieden sind, gilt diese Rechenvorschrift
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="fn">gcd</span> = (<span class="var">a</span>, <span class="var">b</span>) =&gt; {<br/>

<span class="in2"></span><span class="macro">@globexpand(<span class="name">gcd</span>)</span>;<br/>

<span class="in1"></span>};<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Um festzustellen, ob <code>e</code> und  <code>φ(n)</code> teilerfremd sind, wird der
  Erweiterte Euklidische Algorithmus verwendet
</li><li>
 Dieser liefert gleichzeitig noch das inverse Element <code>d</code>, das für den
  geheimen Schlüssel benötigt wird
</li></ul></div>

<div><div>
<code>

<span class="macro">@include(<span class="name"><a href="gcd.html">gcd.x</a>)</span></span><br/>

</code>
</div>

<ul><li>
 Der Erweiterte Euklidische Algorithmus wird in einer eigenen Datei
  implementiert
</li></ul></div>


<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="var">gcd_result</span> = <span class="fn">gcd</span>(<span class="var">phi</span>, <span class="var">e</span>);<br/>

<span class="in1"></span>$<span class="var">err_gcd_not_1</span>.<span class="var">classList</span>.<span class="fn">toggle</span>(<br/>

<span class="in2"></span><span class="str">'hidden'</span>, <span class="var">gcd_result</span>.<span class="var">a</span>.<span class="fn">equals</span>(<span class="var">one</span>)<br/>

<span class="in1"></span>);<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Wenn <code>e</code> und der Wert der φ-Funktion nicht teilerfremd sind, wird
  eine entsprechende Fehlermeldung angezeigt
</li><li>
 Das Attribut <code>a</code> im <code>gcd_result</code> enthält den kleinsten gemeinsamen
  Teiler
</li><li>
 Dieser muss eins sein
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Hier wird ausgenutzt, dass</span> &lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt; <span class="str">und</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt; <span class="str">verschieden sind. Andernfalls</span><br/>

<span class="in2"></span><span class="str">würde sich die</span> <span class="str">φ-Funktion anders</span><br/>

<span class="in2"></span><span class="str">berechnen.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Wichtig ist für RSA, dass der Wert der</span><br/>

<span class="in2"></span><span class="str">φ-Funktion teilerfremd zu</span> &lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<br/>

<span class="in2"></span><span class="str">ist (der größte gemeinsame Teiler also</span><br/>

<span class="in2"></span><span class="str">1 ist).</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Einschränkungen bei der Berechnung von φ werden auf der deutschen
  Seite ausgegeben
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">The prerequisit here is that </span>&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt;<br/>

<span class="in2"></span><span class="str">and</span> &lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt; <span class="str">are different. </span><br/>

<span class="in2"></span><span class="str">Otherwise, the φ function would be</span><br/>

<span class="in2"></span><span class="str">calculate d differently.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">It is important for RSA that the</span><br/>

<span class="in2"></span><span class="str">value of the φ function is</span><br/>

<span class="in2"></span><span class="str">coprime to</span> &lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt; <span class="str">(the largest</span><br/>

<span class="in2"></span><span class="str">common divisor must be 1).</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Und auf der englischen Seite
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">form</span> <span class="var">class</span>=<span class="str">"form-horizontal"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">label</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in4"></span><span class="var">for</span>=<span class="str">"gcd"</span>&gt;<span class="str">ggT(</span>&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str">,</span><br/>

<span class="in4"></span><span class="str">φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">)) =</span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">p</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"form-control-static"</span><br/>

<span class="in4"></span><span class="var">id</span>=<span class="str">"gcd"</span>&gt;&lt;/<span class="var">p</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in2"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">form</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Der größte gemeinsame Teiler wird auf der deutschen Seite
  ausgegeben
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">form</span> <span class="var">class</span>=<span class="str">"form-horizontal"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">label</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in4"></span><span class="var">for</span>=<span class="str">"gcd"</span>&gt;<span class="str">gcd(</span>&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str">,</span><br/>

<span class="in4"></span><span class="str">φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">)) =</span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">p</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"form-control-static"</span><br/>

<span class="in4"></span><span class="var">id</span>=<span class="str">"gcd"</span>&gt;&lt;/<span class="var">p</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in2"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">form</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Und auf der englischen Seite
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">gcd</span> = <span class="fn">$</span>(<span class="str">'gcd'</span>);<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Eine Referenz auf das DOM-Element wird gesichert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span>$<span class="var">gcd</span>.<span class="var">innerText</span> =<br/>

<span class="in2"></span><span class="var">gcd_result</span>.<span class="var">a</span>.<span class="fn">toString</span>();<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Und im <code>refresh</code> wird das Feld aktualisiert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Um den Wert von φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">) zu</span><br/>

<span class="in2"></span><span class="str">bestimmen, reicht es nicht aus</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt; <span class="str">zu kennen. Nur mit der</span><br/>

<span class="in2"></span><span class="str">Kenntnis von</span> &lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt; <span class="str">und</span> &lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;<br/>

<span class="in2"></span><span class="str">kann man φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">) effizient</span><br/>

<span class="in2"></span><span class="str">bestimmen.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Der geheime Schlüssel besteht</span><br/>

<span class="in2"></span><span class="str">aus einem </span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<span class="str"> mit der</span><br/>

<span class="in2"></span><span class="str">Eigenschaft, dass</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str"> × </span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<span class="str"> − 1 ein Vielfaches</span><br/>

<span class="in2"></span><span class="str">von φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">) ist.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Es wird beschrieben wie der geheime Schlüssel berechnet wird
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">In Formeln ausgedrückt, muss gelten:</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str"> × </span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<span class="str"> = 1</span><br/>

<span class="in2"></span><span class="str">(mod φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">))</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Dabei ist mit dem mod-Ausdruck die</span><br/>

<span class="in2"></span><span class="str">Gleichheit bezüglich einer Restklasse</span><br/>

<span class="in2"></span><span class="str">gemeint. Es ist genau dann </span>&lt;<span class="var">i</span>&gt;<span class="var">x</span>&lt;/<span class="var">i</span>&gt;<span class="str"> =</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">y</span>&lt;/<span class="var">i</span>&gt;<span class="str"> (mod </span>&lt;<span class="var">i</span>&gt;<span class="var">z</span>&lt;/<span class="var">i</span>&gt;<span class="str">), wenn es ein</span><br/>

<span class="in2"></span><span class="str">ganzzahliges </span>&lt;<span class="var">i</span>&gt;<span class="var">a</span>&lt;/<span class="var">i</span>&gt;<span class="str"> gibt mit</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">x</span>&lt;/<span class="var">i</span>&gt;<span class="str"> − </span>&lt;<span class="var">i</span>&gt;<span class="var">y</span>&lt;/<span class="var">i</span>&gt;<span class="str"> = </span>&lt;<span class="var">i</span>&gt;<span class="var">z</span>&lt;/<span class="var">i</span>&gt;<br/>

<span class="in2"></span><span class="str">× </span>&lt;<span class="var">i</span>&gt;<span class="var">a</span>&lt;/<span class="var">i</span>&gt;<span class="str">.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Und wieso damit die Entschlüsselung funktioniert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Für die gewählten Werte von </span>&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt;,<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;<span class="str"> und </span>&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str"> ergibt sich</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<span class="str"> als:</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Dann wird der geheime Schlüssel ausgegeben
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">To determine the value of</span><br/>

<span class="in2"></span><span class="str">φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">), it is not enough</span><br/>

<span class="in2"></span><span class="str">to know</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">. Only with the</span><br/>

<span class="in2"></span><span class="str">knowledge of</span> &lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt; <span class="str">and</span> &lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;<br/>

<span class="in2"></span><span class="str">we can efficiently determine</span><br/>

<span class="in2"></span><span class="str">φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">).</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">The secret key also consists of</span><br/>

<span class="in2"></span><span class="str">a </span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<span class="str"> with the</span><br/>

<span class="in2"></span><span class="str">property that </span>&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str"> ×</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<span class="str"> − 1 is a multiple of</span><br/>

<span class="in2"></span><span class="str">φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">).</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch auf der englischen Seite wird beschrieben, wie der geheime
  Schlüssel berechnet wird
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Expressed in formulas, the</span><br/>

<span class="in2"></span><span class="str">following must apply:</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str"> × </span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<span class="str"> = 1</span><br/>

<span class="in2"></span><span class="str">(mod φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">))</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Ebenfalls mit der Formel-Darstellung
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">In this case, the mod expression means</span><br/>

<span class="in2"></span><span class="str">equality with regard to a residual</span><br/>

<span class="in2"></span><span class="str">class. It is </span>&lt;<span class="var">i</span>&gt;<span class="var">x</span>&lt;/<span class="var">i</span>&gt;<span class="str"> = </span>&lt;<span class="var">i</span>&gt;<span class="var">y</span>&lt;/<span class="var">i</span>&gt;<span class="str"> (mod</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">z</span>&lt;/<span class="var">i</span>&gt;<span class="str">) if and only if there is an</span><br/>

<span class="in2"></span><span class="str">integer a with </span>&lt;<span class="var">i</span>&gt;<span class="var">x</span>&lt;/<span class="var">i</span>&gt;<span class="str"> −</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">y</span>&lt;/<span class="var">i</span>&gt;<span class="str"> = </span>&lt;<span class="var">i</span>&gt;<span class="var">z</span>&lt;/<span class="var">i</span>&gt;<span class="str"> × </span>&lt;<span class="var">i</span>&gt;<span class="var">a</span>&lt;/<span class="var">i</span>&gt;<span class="str">.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">For the chosen values of </span>&lt;<span class="var">i</span>&gt;<span class="var">p</span>&lt;/<span class="var">i</span>&gt;<span class="str">,</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">q</span>&lt;/<span class="var">i</span>&gt;<span class="str">, and </span>&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str">, we get</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<span class="str"> as:</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Und warum das Ganze funktioniert
</li><li>
 Hier wird auf das nächste Ergebnis hingearbeitet
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">css</span>)</span><br/>

<span class="in1"></span>#<span class="var">rsa</span>-<span class="var">container</span> <span class="var">p</span>.<span class="var">form</span> {<br/>

<span class="in2"></span><span class="var">margin</span>-<span class="var">left</span>: <span class="num">32px</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">css</span>)</span><br/>

</code>
</div>

<ul><li>
 Formeln werden etwas eingerückt
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">private key</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">form</span> <span class="var">class</span>=<span class="str">"form-horizontal"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">label</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in4"></span><span class="var">for</span>=<span class="str">"private-key"</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<br/>

<span class="in4"></span><span class="str">=</span><br/>

<span class="in3"></span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">p</span><br/>

<span class="in4"></span><span class="var">class</span>=<span class="str">"form-control-static"</span><br/>

<span class="in4"></span><span class="var">id</span>=<span class="str">"private-key"</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in2"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">form</span>&gt;<br/>

<span class="macro">@end(<span class="name">private key</span>)</span><br/>

</code>
</div>

<ul><li>
 Das Feld mit der Ausgabe des geheimen Schlüssels kann in der
  deutschen und englischen Version gemeinsam verwendet werden
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span><span class="macro">@multiple(<span class="name">private key</span>)</span><br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Den geheimen Schlüssel in der deutschen Version ausgeben
</li></ul></div>


<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span><span class="macro">@multiple(<span class="name">private key</span>)</span><br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Den geheimen Schlüssel in der englischen Version ausgeben
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">private_key</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'private-key'</span>);<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Referenz auf den geheimen Schlüssel wird in der Anwendung
  gespeichert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span><span class="type">let</span> <span class="var">private_key</span> = <span class="var">gcd_result</span>.<span class="var">v</span>;<br/>

<span class="in1"></span><span class="type">const</span> <span class="var">zero</span> = <span class="fn">bigInt</span>.<span class="var">zero</span>;<br/>

<span class="in1"></span><span class="keyword">if</span> (<span class="var">private_key</span>.<span class="fn">lesser</span>(<span class="var">zero</span>)) {<br/>

<span class="in2"></span><span class="var">private_key</span> =<br/>

<span class="in3"></span><span class="var">private_key</span>.<span class="fn">add</span>(<span class="var">phi</span>);<br/>

<span class="in1"></span>}<br/>

<span class="in1"></span>$<span class="var">private_key</span>.<span class="var">innerText</span> =<br/>

<span class="in2"></span><span class="var">private_key</span>.<span class="fn">toString</span>();<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Der private Schlüssel ist das multiplikative Inverse modulo <code>φ(n)</code>
</li><li>
 Falls der Schlüssel negative ist, wird der Wert von <code>φ(n)</code> hinzu
  addiert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Dieses</span> &lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt; <span class="str">kann immer bestimmt</span><br/>

<span class="in2"></span><span class="str">werden, wenn</span> &lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt; <span class="str">mit der oben</span><br/>

<span class="in2"></span><span class="str">beschriebenen Einschränkung gewählt</span><br/>

<span class="in2"></span><span class="str">wurde – bspw. mit dem Erweiterten</span><br/>

<span class="in2"></span><span class="str">Euklidischen Algorithmus.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Es wird beschrieben, wie der geheime Schlüssel gewählt wird
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">This</span> &lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt; <span class="str">can always be determined</span><br/>

<span class="in2"></span><span class="str">(if</span> &lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt; <span class="str">was chosen with the</span><br/>

<span class="in2"></span><span class="str">restriction described above)—for</span><br/>

<span class="in2"></span><span class="str">example with the extended Euclidean</span><br/>

<span class="in2"></span><span class="str">algorithm.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch auf der englischen Seite wird die Beschreibung ausgegeben
</li></ul></div>

</div>
<h1>5. Ver- und Entschlüsseln</h1>
<div class="slides">
<div><div>
<h1>5. Ver- und Entschlüsseln</h1>
</div>

<ul><li>
 Endlich kommt die eigentliche Ver- und Entschlüsselung
</li><li>
 Durch die Vorarbeiten bleibt aber nicht mehr viel zu tun
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="str">Ver- und Entschlüsseln</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Grundsätzlich werden bei diesem</span><br/>

<span class="in2"></span><span class="str">Verfahren keine Texte, sondern nur</span><br/>

<span class="in2"></span><span class="str">Zahlen ver- und entschlüsselt, die</span><br/>

<span class="in2"></span><span class="str">zwischen 0 und </span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str"> − 1 liegen.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Hier wird beschrieben, was für Nachrichten verschlüsselt werden können
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Um eine Nachricht</span> &lt;<span class="var">i</span>&gt;<span class="var">m</span>&lt;/<span class="var">i</span>&gt; <span class="str">mit dem</span><br/>

<span class="in2"></span><span class="str">öffentlichen Schlüssel</span> (&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;,<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;) <span class="str">zu verschlüsseln, wird</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&amp;#<span class="num">39</span>;&lt;/<span class="var">i</span>&gt;<span class="str"> :=</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&lt;/<span class="var">i</span>&gt;&lt;<span class="var">sup</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;&lt;/<span class="var">sup</span>&gt;<br/>

<span class="in3"></span><span class="str">(mod </span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">)</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">berechnet.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Das Verschlüsseln besteht aus einer Exponentiation
</li><li>
 Die Striche an den Variablen-Namen der Nachrichten werden durch
  HTML-Entitäten realisiert, um den Source Code Parser nicht
  durcheinander zu bringen
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Das Entschlüsseln mit dem privaten</span><br/>

<span class="in2"></span><span class="str">Schlüssel (</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">, </span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<span class="str">)</span><br/>

<span class="in2"></span><span class="str">erfolgt analog mit</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&amp;#<span class="num">39</span>;&amp;#<span class="num">39</span>;&lt;/<span class="var">i</span>&gt;<span class="str"> :=</span><br/>

<span class="in3"></span><span class="str">(</span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&amp;#<span class="num">39</span>;&lt;/<span class="var">i</span>&gt;<span class="str">)</span>&lt;<span class="var">sup</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;&lt;/<span class="var">sup</span>&gt;<br/>

<span class="in3"></span><span class="str">(mod </span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">).</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch das Entschlüsseln ist eine Exponentiation
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Damit ist</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&amp;#<span class="num">39</span>;&amp;#<span class="num">39</span>;&lt;/<span class="var">i</span>&gt;<span class="str"> =</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&lt;/<span class="var">i</span>&gt;&lt;<span class="var">sup</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str"> ×</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;&lt;/<span class="var">sup</span>&gt;<br/>

<span class="in3"></span><span class="str">(mod </span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">).</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 <code>m</code>-Strich wird durch <code>m</code> hoch <code>e</code> ersetzt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">RSA nutzt die Eigenschaft aus, dass</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">x</span>&lt;/<span class="var">i</span>&gt;&lt;<span class="var">sup</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">a</span>&lt;/<span class="var">i</span>&gt;&lt;/<span class="var">sup</span>&gt;<span class="str"> =</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">x</span>&lt;/<span class="var">i</span>&gt;&lt;<span class="var">sup</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">b</span>&lt;/<span class="var">i</span>&gt;&lt;/<span class="var">sup</span>&gt;<br/>

<span class="in3"></span><span class="str">(mod </span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">)</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">wenn</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">a</span>&lt;/<span class="var">i</span>&gt;<span class="str"> =</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">b</span>&lt;/<span class="var">i</span>&gt;<span class="str"> (mod φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">))</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Es wird kurz beschrieben, wann bei der Exponentiation das gleiche
  Ergebnis herauskommt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt; <span class="str">und</span> &lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt; <span class="str">wurden passend</span><br/>

<span class="in2"></span><span class="str">gewählt, dass</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&amp;#<span class="num">39</span>;&amp;#<span class="num">39</span>;&lt;/<span class="var">i</span>&gt;<span class="str"> = </span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&lt;/<span class="var">i</span>&gt;<span class="str">.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Die Reihenfolge spielt keine Rolle.</span><br/>

<span class="in2"></span><span class="str">Man könnte auch erst eine Nachricht</span><br/>

<span class="in2"></span><span class="str">mit dem privaten Schlüssel</span><br/>

<span class="in2"></span><span class="str">potenzieren, und das Ergebnis dann</span><br/>

<span class="in2"></span><span class="str">mit dem öffentlichen Schlüssel</span><br/>

<span class="in2"></span><span class="str">potenzieren – das verwendet man</span><br/>

<span class="in2"></span><span class="str">bei RSA-Signaturen.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Damit kann die Entschlüsselung erklärt werden
</li><li>
 Es wird darauf hingewiesen, dass die Reihenfolge keine Rolle spielt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="str">Encryption and decryption</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Internally, this method works only with</span><br/>

<span class="in2"></span><span class="str">numbers (no text), which are between 0</span><br/>

<span class="in2"></span><span class="str">and</span> &lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str"> − 1.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">A message </span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&lt;/<span class="var">i</span>&gt;<span class="str"> (number) is</span><br/>

<span class="in2"></span><span class="str">encrypted with the public key (</span><br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">,</span> &lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str">) by calculating:</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&amp;#<span class="num">39</span>;&lt;/<span class="var">i</span>&gt;<span class="str"> :=</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&lt;/<span class="var">i</span>&gt;&lt;<span class="var">sup</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;&lt;/<span class="var">sup</span>&gt;<br/>

<span class="in3"></span><span class="str">(mod </span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">)</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch in der englischen Version wird beschrieben, wie die
  Verschlüsselung funktioniert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Decrypting with the private key</span><br/>

<span class="in2"></span><span class="str">(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">, </span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<span class="str">) is done</span><br/>

<span class="in2"></span><span class="str">analogously with</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&amp;#<span class="num">39</span>;&amp;#<span class="num">39</span>;&lt;/<span class="var">i</span>&gt;<span class="str"> :=</span><br/>

<span class="in3"></span><span class="str">(</span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&amp;#<span class="num">39</span>;&lt;/<span class="var">i</span>&gt;<span class="str">)</span>&lt;<span class="var">sup</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;&lt;/<span class="var">sup</span>&gt;<br/>

<span class="in3"></span><span class="str">(mod </span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">).</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">This is</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&amp;#<span class="num">39</span>;&amp;#<span class="num">39</span>;&lt;/<span class="var">i</span>&gt;<span class="str"> =</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&lt;/<span class="var">i</span>&gt;&lt;<span class="var">sup</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str"> ×</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;&lt;/<span class="var">sup</span>&gt;<span class="str"> (mod </span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">).</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Und es wird beschrieben, wie die Entschlüsselung funktioniert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">RSA exploits the property that</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">x</span>&lt;/<span class="var">i</span>&gt;&lt;<span class="var">sup</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">a</span>&lt;/<span class="var">i</span>&gt;&lt;/<span class="var">sup</span>&gt;<span class="str"> =</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">x</span>&lt;/<span class="var">i</span>&gt;&lt;<span class="var">sup</span>&gt;&lt;<span class="var">i</span>&gt;<span class="var">b</span>&lt;/<span class="var">i</span>&gt;&lt;/<span class="var">sup</span>&gt;<br/>

<span class="in3"></span><span class="str">(mod </span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">)</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">if</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">a</span>&lt;/<span class="var">i</span>&gt;<span class="str"> =</span><br/>

<span class="in3"></span>&lt;<span class="var">i</span>&gt;<span class="var">b</span>&lt;/<span class="var">i</span>&gt;<span class="str"> (mod φ(</span>&lt;<span class="var">i</span>&gt;<span class="var">n</span>&lt;/<span class="var">i</span>&gt;<span class="str">))</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Ebenso wird beschrieben, wann die Exponentiation das gleiche
  Ergebnis liefern
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">As </span>&lt;<span class="var">i</span>&gt;<span class="var">e</span>&lt;/<span class="var">i</span>&gt;<span class="str"> and </span>&lt;<span class="var">i</span>&gt;<span class="var">d</span>&lt;/<span class="var">i</span>&gt;<span class="str"> were chosen</span><br/>

<span class="in2"></span><span class="str">appropriately, it is</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span> <span class="var">class</span>=<span class="str">"form"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&amp;#<span class="num">39</span>;&amp;#<span class="num">39</span>;&lt;/<span class="var">i</span>&gt;<span class="str"> = </span>&lt;<span class="var">i</span>&gt;<span class="var">m</span>&lt;/<span class="var">i</span>&gt;<span class="str">.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">The order does not matter. You could</span><br/>

<span class="in2"></span><span class="str">also first raise a message with the</span><br/>

<span class="in2"></span><span class="str">private key, and then power up the</span><br/>

<span class="in2"></span><span class="str">result with the public key—this</span><br/>

<span class="in2"></span><span class="str">is what you use with RSA signatures.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Und warum RSA damit funktioniert
</li></ul></div>

</div>
<h1>6. Nachrichten</h1>
<div class="slides">
<div><div>
<h1>6. Nachrichten</h1>
</div>

<ul><li>
 In dieser Sektion wird beschrieben, wie de Nachrichten angezeigt
  und verarbeitet werden
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="str">Nachrichten</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">In den folgenden zwei Textboxen</span><br/>

<span class="in2"></span><span class="str">können Sie sehen, wie das Ver-</span><br/>

<span class="in2"></span><span class="str">und Entschlüsseln für konkrete</span><br/>

<span class="in2"></span><span class="str">Eingaben (Zahlen) funktioniert.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">form</span> <span class="var">class</span>=<span class="str">"form-horizontal"</span>&gt;<br/>

<span class="in2"></span><span class="macro">@expand(<span class="name">crypt boxes de</span>)</span><br/>

<span class="in1"></span>&lt;/<span class="var">form</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Hier werden die Nachrichten-Boxen erklärt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="str">Messages</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">In the following two text boxes, you</span><br/>

<span class="in2"></span><span class="str">can see how encryption and</span><br/>

<span class="in2"></span><span class="str">decryption work for concrete inputs</span><br/>

<span class="in2"></span><span class="str">(numbers).</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">form</span> <span class="var">class</span>=<span class="str">"form-horizontal"</span>&gt;<br/>

<span class="in2"></span><span class="macro">@expand(<span class="name">crypt boxes en</span>)</span><br/>

<span class="in1"></span>&lt;/<span class="var">form</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch in der englischen Version werden die Nachrichten-Boxen erklärt
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">crypt boxes de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">label</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in3"></span><span class="var">for</span>=<span class="str">"public-key"</span>&gt;<span class="str">Klartext</span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">input</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"form-control"</span><br/>

<span class="in3"></span><span class="var">id</span>=<span class="str">"private-message"</span><br/>

<span class="in3"></span><span class="var">value</span>=<span class="str">"7"</span>&gt;&lt;/<span class="var">input</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">crypt boxes de</span>)</span><br/>

</code>
</div>

<ul><li>
 Die deutsche Geheimtext-Boxen besteht aus einem Textfeld mit dem
  Klartext
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">crypt boxes de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-public-msg-too-big"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"row alert alert-danger"</span>&gt;<br/>

<span class="in2"></span><span class="str">Die Klartextzahl ist zu groß.</span><br/>

<span class="in2"></span><span class="str">Der maximale Wert ist</span><br/>

<span class="in2"></span>&lt;<span class="var">span</span> <span class="var">class</span>=<span class="str">"max-msg"</span>&gt;&lt;/<span class="var">span</span>&gt;.<br/>

<span class="in2"></span><span class="str">Bitte wählen Sie größere Primzahlen.</span><br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">crypt boxes de</span>)</span><br/>

</code>
</div>

<ul><li>
 Und es gibt eine Fehlermeldung, wenn die eingegebene Nachricht zu
  groß ist
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">crypt boxes de</span>)</span><br/>

<span class="in1"></span><span class="macro">@multiple(<span class="name">crypt arrow</span>)</span><br/>

<span class="macro">@end(<span class="name">crypt boxes de</span>)</span><br/>

</code>
</div>

<ul><li>
 Ein Pfeil zeigt die Richtung an, in die der Algorithmus gerade
  arbeitet
</li><li>
 Die Richtung kann durch Eingabe in die passenden Textfelder
  umgedreht werden
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">crypt boxes de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">label</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in3"></span><span class="var">for</span>=<span class="str">"private-key"</span><br/>

<span class="in2"></span>&gt;<span class="str">Geheimtext</span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">input</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"form-control"</span><br/>

<span class="in3"></span><span class="var">id</span>=<span class="str">"public-message"</span><br/>

<span class="in2"></span>&gt;&lt;/<span class="var">input</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">crypt boxes de</span>)</span><br/>

</code>
</div>

<ul><li>
 Ein weiteres Textfeld enthält den Geheimtext
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">crypt boxes de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-private-msg-too-big"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"row alert alert-danger"</span><br/>

<span class="in1"></span>&gt;<span class="str">Die Geheimtextzahl ist zu groß.</span><br/>

<span class="in2"></span><span class="str">Der maximale Wert ist</span><br/>

<span class="in2"></span>&lt;<span class="var">span</span> <span class="var">class</span>=<span class="str">"max-msg"</span>&gt;&lt;/<span class="var">span</span>&gt;.<br/>

<span class="in2"></span><span class="str">Bitte wählen Sie größere</span><br/>

<span class="in2"></span><span class="str">Primzahlen.</span><br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">crypt boxes de</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch hier gibt es eine Fehlermeldung, falls die eingegebene Zahl
  zu groß ist
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">crypt boxes en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">label</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in3"></span><span class="var">for</span>=<span class="str">"public-key"</span><br/>

<span class="in2"></span>&gt;<span class="str">Plaintext</span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">input</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"form-control"</span><br/>

<span class="in3"></span><span class="var">id</span>=<span class="str">"private-message"</span><br/>

<span class="in3"></span><span class="var">value</span>=<span class="str">"7"</span>&gt;&lt;/<span class="var">input</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">crypt boxes en</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch in der englischen Version gibt es ein Textfeld mit dem Klartext
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">crypt boxes en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-public-msg-too-big"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"row alert alert-danger"</span><br/>

<span class="in1"></span>&gt;<span class="str">Plaintext number too big. The</span><br/>

<span class="in2"></span><span class="str">maximum value is</span><br/>

<span class="in2"></span>&lt;<span class="var">span</span> <span class="var">class</span>=<span class="str">"max-msg"</span>&gt;&lt;/<span class="var">span</span>&gt;<span class="str">.</span><br/>

<span class="in2"></span><span class="str">Please choose bigger</span><br/>

<span class="in2"></span><span class="str">primes.</span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">crypt boxes en</span>)</span><br/>

</code>
</div>

<ul><li>
 Und eine Fehlermeldung, wenn der Klartext zu groß ist
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">crypt boxes en</span>)</span><br/>

<span class="in1"></span><span class="macro">@multiple(<span class="name">crypt arrow</span>)</span><br/>

<span class="macro">@end(<span class="name">crypt boxes en</span>)</span><br/>

</code>
</div>

<ul><li>
 In beiden Sprachen kann der gleiche Pfeil verwendet werden, der die
  Richtung des Algorithmus anzeigt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">crypt boxes en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"form-group"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">label</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"col-sm-3 control-label"</span><br/>

<span class="in3"></span><span class="var">for</span>=<span class="str">"private-key"</span><br/>

<span class="in2"></span>&gt;<span class="str">Ciphertext</span>&lt;/<span class="var">label</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"col-sm-9"</span>&gt;&lt;<span class="var">input</span><br/>

<span class="in3"></span><span class="var">class</span>=<span class="str">"form-control"</span><br/>

<span class="in3"></span><span class="var">id</span>=<span class="str">"public-message"</span><br/>

<span class="in2"></span>&gt;&lt;/<span class="var">input</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">crypt boxes en</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch gibt es wieder ein Feld mit dem Geheimtext
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">crypt boxes en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"err-private-msg-too-big"</span><br/>

<span class="in2"></span><span class="var">class</span>=<span class="str">"row alert alert-danger"</span><br/>

<span class="in1"></span>&gt;<span class="str">Ciphertext number too big. The</span><br/>

<span class="in2"></span><span class="str">maximum value is</span><br/>

<span class="in2"></span>&lt;<span class="var">span</span> <span class="var">class</span>=<span class="str">"max-msg"</span>&gt;&lt;/<span class="var">span</span>&gt;<span class="str">.</span><br/>

<span class="in2"></span><span class="str">Please choose bigger</span><br/>

<span class="in2"></span><span class="str">primes.</span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">crypt boxes en</span>)</span><br/>

</code>
</div>

<ul><li>
 Und eine Fehlermeldung, falls der Geheimtext zu groß ist
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">crypt arrow</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">class</span>=<span class="str">"row"</span>&gt;<br/>

<span class="in2"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"direction"</span>&gt;<br/>

<span class="in3"></span>&lt;<span class="var">svg</span> <span class="var">viewbox</span>=<span class="str">"0 0 50 50"</span><br/>

<span class="in4"></span><span class="var">width</span>=<span class="str">"50"</span> <span class="var">height</span>=<span class="str">"50"</span>&gt;<br/>

<span class="in4"></span>&lt;<span class="var">polyline</span> <span class="var">points</span>=<span class="str">"0,20</span><span class="virt"></span><br/><span class="str"> 15,20 15,0 35,0 35,20 50,20 25,50"</span><br/>

<span class="in4"></span>&gt;&lt;/<span class="var">polyline</span>&gt;<br/>

<span class="in3"></span>&lt;/<span class="var">svg</span>&gt;<br/>

<span class="in2"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="in1"></span>&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">crypt arrow</span>)</span><br/>

</code>
</div>

<ul><li>
 Der Pfeil ist eine einfache SVG-Grafik
</li><li>
 Durch CSS-Klassen kann er rotiert werden
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">css</span>)</span><br/>

<span class="in1"></span>#<span class="var">direction</span> <span class="var">svg</span> {<br/>

<span class="in2"></span><span class="var">display</span>: <span class="var">block</span>;<br/>

<span class="in2"></span><span class="var">margin</span>: <span class="num">1em</span> <span class="type">auto</span> <span class="num">2em</span> <span class="type">auto</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">css</span>)</span><br/>

</code>
</div>

<ul><li>
 Der Pfeil wird als eigener Block angezeigt
</li><li>
 Er wird mittig positioniert und bekommt oben und unten feste Abstände
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">css</span>)</span><br/>

<span class="in1"></span>#<span class="var">direction</span> <span class="var">svg</span> <span class="var">polyline</span> {<br/>

<span class="in2"></span><span class="var">fill</span>: #<span class="num">888</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">css</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Füllfarbe des Pfeils wird auch im CSS gesetzt
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">max_msgs</span> =<br/>

<span class="in2"></span><span class="var">document</span>.<span class="fn">getElementsByClassName</span>(<br/>

<span class="in3"></span><span class="str">'max-msg'</span><br/>

<span class="in2"></span>);<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 In den Fehlermeldungen gibt es Elemente, die die größte mögliche
  Nachricht anzeigen
</li><li>
 Sie sind mit der Klasse <code>max-msg</code> markiert
</li><li>
 Alle diese Elemente werden in der Variable <code>$max_msgs</code> gesammelt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="var">max_msg</span> =<br/>

<span class="in2"></span><span class="var">public_key</span>.<span class="fn">subtract</span>(<span class="var">one</span>).<span class="fn">toString</span>();<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Die größte mögliche Nachricht ist um eins kleiner als der öffentliche
  Schlüssel
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span><span class="keyword">for</span> (<br/>

<span class="in2"></span><span class="type">let</span> <span class="var">i</span> = <span class="num">0</span>; <span class="var">i</span> &lt; $<span class="var">max_msgs</span>.<span class="var">length</span>; ++<span class="var">i</span><br/>

<span class="in1"></span>) {<br/>

<span class="in2"></span>$<span class="var">max_msgs</span>[<span class="var">i</span>].<span class="var">innerText</span> = <span class="var">max_msg</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Felder in den Fehlermeldungen werden beim <code>refresh</code> auf den
  korrekten Wert gesetzt
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">private_message</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'private-message'</span>);<br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">public_message</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'public-message'</span>);<br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">err_public_msg_too_big</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'err-public-msg-too-big'</span>);<br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">err_private_msg_too_big</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'err-private-msg-too-big'</span>);<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Referenzen auf DOM-Elemente für Klartext und Geheimtext werden in
  Variablen abgelegt
</li><li>
 Ebenso die Referenzen auf die Fehlermeldungen
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">setup rsa</span>)</span><br/>

<span class="in1"></span>$<span class="var">private_message</span>.<br/>

<span class="in2"></span><span class="fn">addEventListener</span>(<span class="str">'input'</span>, <span class="var">event</span> =&gt; {<br/>

<span class="in3"></span><span class="fn">setEncrypt</span>(<span class="num">true</span>);<br/>

<span class="in3"></span><span class="fn">queueRefresh</span>(<span class="var">event</span>);<br/>

<span class="in2"></span>});<br/>

<span class="in1"></span>$<span class="var">public_message</span>.<br/>

<span class="in2"></span><span class="fn">addEventListener</span>(<span class="str">'input'</span>, <span class="var">event</span> =&gt; {<br/>

<span class="in3"></span><span class="fn">setEncrypt</span>(<span class="num">false</span>);<br/>

<span class="in3"></span><span class="fn">queueRefresh</span>(<span class="var">event</span>);<br/>

<span class="in2"></span>});<br/>

<span class="macro">@end(<span class="name">setup rsa</span>)</span><br/>

</code>
</div>

<ul><li>
 Wenn der Klartext oder der Geheimtext geändert wird, wird zusätzlich
  die Richtung des Algorithmus angepasst
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">let</span> <span class="var">encrypt</span> = <span class="num">true</span>;<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Der Algorithmus kann sowohl ver- als auch entschlüsseln
</li><li>
 Die Variable <code>encrypt</code> bestimmt die Richtung in die der Algorithmus
  läuft
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span><span class="keyword">if</span> (<span class="var">encrypt</span>) {<br/>

<span class="in2"></span><span class="macro">@expand(<span class="name">encrypt</span>)</span>;<br/>

<span class="in1"></span>} <span class="keyword">else</span> {<br/>

<span class="in2"></span><span class="macro">@expand(<span class="name">decrypt</span>)</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Je nach Richtung in die der Algorithmus arbeiten soll, wird
  entweder der Klartext verschlüsselt
</li><li>
 oder der Geheimtext entschlüsselt
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">encrypt</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="var">source</span> =<br/>

<span class="in2"></span><span class="fn">bigInt</span>($<span class="var">private_message</span>.<span class="var">value</span>);<br/>

<span class="in1"></span>$<span class="var">err_public_msg_too_big</span>.<br/>

<span class="in2"></span><span class="var">classList</span>.<span class="fn">toggle</span>(<br/>

<span class="in3"></span><span class="str">'hidden'</span>,<br/>

<span class="in3"></span><span class="var">source</span>.<span class="fn">lesser</span>(<span class="var">public_key</span>)<br/>

<span class="in2"></span>);<br/>

<span class="in1"></span>$<span class="var">err_private_msg_too_big</span>.<br/>

<span class="in2"></span><span class="var">classList</span>.<span class="fn">add</span>(<span class="str">'hidden'</span>);<br/>

<span class="macro">@end(<span class="name">encrypt</span>)</span><br/>

</code>
</div>

<ul><li>
 Beim Verschlüsseln wird geprüft, ob der Klartext zu groß ist
</li><li>
 Dann wird eine Fehlermeldung angezeigt
</li><li>
 Beim Entschlüsseln gibt es eine analoge Fehlermeldung, die beim
  Verschlüsseln immer ausgeblendet ist
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">encrypt</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="var">encrypted</span> =<br/>

<span class="in2"></span><span class="var">source</span>.<span class="fn">modPow</span>(<br/>

<span class="in3"></span><span class="var">e</span>, <span class="var">public_key</span><br/>

<span class="in2"></span>);<br/>

<span class="in1"></span>$<span class="var">public_message</span>.<span class="var">value</span> =<br/>

<span class="in2"></span><span class="var">encrypted</span>.<span class="fn">toString</span>();<br/>

<span class="macro">@end(<span class="name">encrypt</span>)</span><br/>

</code>
</div>

<ul><li>
 Das Verschlüsseln besteht nur aus einer Exponentiation mit <code>e</code>
  modulo <code>n</code> (dem öffentlichen Schlüssel)
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">decrypt</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="var">source</span> =<br/>

<span class="in2"></span><span class="fn">bigInt</span>($<span class="var">public_message</span>.<span class="var">value</span>);<br/>

<span class="in1"></span>$<span class="var">err_public_msg_too_big</span>.<br/>

<span class="in2"></span><span class="var">classList</span>.<span class="fn">add</span>(<span class="str">'hidden'</span>);<br/>

<span class="in1"></span>$<span class="var">err_private_msg_too_big</span>.<br/>

<span class="in2"></span><span class="var">classList</span>.<span class="fn">toggle</span>(<br/>

<span class="in3"></span><span class="str">'hidden'</span>,<br/>

<span class="in3"></span><span class="var">source</span>.<span class="fn">lesser</span>(<span class="var">public_key</span>)<br/>

<span class="in2"></span>);<br/>

<span class="macro">@end(<span class="name">decrypt</span>)</span><br/>

</code>
</div>

<ul><li>
 Beim Entschlüsseln wird der Geheimtext als Eingabe verwendet
</li><li>
 Auch hier wird eine Fehlermeldung ausgegeben, wenn die Zahl zu groß
  ist
</li><li>
 Beim Verschlüsseln gibt es eine anloge Fehlermeldung, die beim
  Entschlüsseln immer ausgeblendet ist
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">decrypt</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="var">decrypted</span> = <span class="var">source</span>.<span class="fn">modPow</span>(<br/>

<span class="in2"></span><span class="var">private_key</span>, <span class="var">public_key</span><br/>

<span class="in1"></span>);<br/>

<span class="in1"></span>$<span class="var">private_message</span>.<span class="var">value</span> =<br/>

<span class="in2"></span><span class="var">decrypted</span>.<span class="fn">toString</span>();<br/>

<span class="macro">@end(<span class="name">decrypt</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch das Entschlüsseln besteht aus einer einzigen Exponentiation mit
  dem geheimen Schlüssel <code>d</code> modulo <code>N</code>
</li></ul></div>

</div>
<h1>7. Richtung des Algorithmus anzeigen</h1>
<div class="slides">
<div><div>
<h1>7. Richtung des Algorithmus anzeigen</h1>
</div>

<ul><li>
 Es gibt ein Element auf der Web-Seite, das die Ablaufrichtung des
  Algorithmus anzeigt
</li><li>
 Also, ob der Algorithmus ver- oder entschlüsselt
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> $<span class="var">direction</span> =<br/>

<span class="in2"></span><span class="fn">$</span>(<span class="str">'direction'</span>);<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Dieses Element zeigt die Richtung an, in der der Algorithmus läuft
</li><li>
 Die Richtung wird durch CSS-Klassen visualisiert
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">setup rsa</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="fn">setEncrypt</span> = <span class="var">new_encrypt</span> =&gt; {<br/>

<span class="in2"></span><span class="keyword">if</span> (<span class="var">encrypt</span> === <span class="var">new_encrypt</span>) {<br/>

<span class="in3"></span><span class="keyword">return</span>;<br/>

<span class="in2"></span>}<br/>

<span class="in2"></span><span class="var">encrypt</span> = <span class="var">new_encrypt</span>;<br/>

<span class="in2"></span><span class="keyword">if</span> (<span class="var">encrypt</span>) {<br/>

<span class="in3"></span>$<span class="var">direction</span>.<span class="var">classList</span>.<span class="fn">remove</span>(<span class="str">'flip'</span>);<br/>

<span class="in3"></span>$<span class="var">direction</span>.<span class="var">classList</span>.<span class="fn">add</span>(<span class="str">'flop'</span>);<br/>

<span class="in2"></span>} <span class="keyword">else</span> {<br/>

<span class="in3"></span>$<span class="var">direction</span>.<span class="var">classList</span>.<span class="fn">remove</span>(<span class="str">'flop'</span>);<br/>

<span class="in3"></span>$<span class="var">direction</span>.<span class="var">classList</span>.<span class="fn">add</span>(<span class="str">'flip'</span>);<br/>

<span class="in2"></span>}<br/>

<span class="in1"></span>};<br/>

<span class="macro">@end(<span class="name">setup rsa</span>)</span><br/>

</code>
</div>

<ul><li>
 Durch CSS-Animationen wird der Pfeil hin- und hergedreht
</li><li>
 Wenn keine Klasse oder die Klasse <code>s{flop}</code> gesetzt ist, dann zeigt
  der Pfeil in die Verschlüsselungsrichtung
</li><li>
 Wenn die Klasse <code>s{flip}</code> gesetzt ist, zeigt er in die
  Entschlüsselungsrichtung
</li><li>
 <code>s{flop}</code> ist notwendig, um den Wechsel zu animieren
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">css</span>)</span><br/>

<span class="in1"></span>@<span class="var">keyframes</span> <span class="var">flip</span> {<br/>

<span class="in2"></span><span class="var">from</span> {<br/>

<span class="in3"></span><span class="var">transform</span>: <span class="fn">rotate</span>(<span class="num">0deg</span>);<br/>

<span class="in2"></span>}<br/>

<span class="in2"></span><span class="var">to</span> {<br/>

<span class="in3"></span><span class="var">transform</span>: <span class="fn">rotate</span>(<span class="num">180deg</span>);<br/>

<span class="in2"></span>}<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">css</span>)</span><br/>

</code>
</div>

<ul><li>
 Die <code>flip</code>-Animation dreht den Pfeil um 180 Grad
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">css</span>)</span><br/>

<span class="in1"></span>#<span class="var">direction</span>.<span class="var">flip</span> <span class="var">svg</span> {<br/>

<span class="in2"></span><span class="var">animation</span>-<span class="var">name</span>: <span class="var">flip</span>;<br/>

<span class="in2"></span><span class="var">animation</span>-<span class="var">duration</span>: <span class="num">1s</span>;<br/>

<span class="in2"></span><span class="var">animation</span>-<span class="var">fill</span>-<span class="var">mode</span>: <span class="var">forwards</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">css</span>)</span><br/>

</code>
</div>

<ul><li>
 Wird die <code>flip</code>-Klasse auf dem <code>direction</code>-Element gesetzt, dann
  startet die <code>flip</code>-Animation auf dem Pfeil
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">css</span>)</span><br/>

<span class="in1"></span>@<span class="var">keyframes</span> <span class="var">flop</span> {<br/>

<span class="in2"></span><span class="var">from</span> {<br/>

<span class="in3"></span><span class="var">transform</span>: <span class="fn">rotate</span>(<span class="num">180deg</span>);<br/>

<span class="in2"></span>}<br/>

<span class="in2"></span><span class="var">to</span> {<br/>

<span class="in3"></span><span class="var">transform</span>: <span class="fn">rotate</span>(<span class="num">0deg</span>);<br/>

<span class="in2"></span>}<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">css</span>)</span><br/>

</code>
</div>

<ul><li>
 Die <code>flop</code>-Animation dreht den Pfeil zurück
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">css</span>)</span><br/>

<span class="in1"></span>#<span class="var">direction</span>.<span class="var">flop</span> <span class="var">svg</span> {<br/>

<span class="in2"></span><span class="var">animation</span>-<span class="var">name</span>: <span class="var">flop</span>;<br/>

<span class="in2"></span><span class="var">animation</span>-<span class="var">duration</span>: <span class="num">1s</span>;<br/>

<span class="in2"></span><span class="var">animation</span>-<span class="var">fill</span>-<span class="var">mode</span>: <span class="var">forwards</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">css</span>)</span><br/>

</code>
</div>

<ul><li>
 Wenn die <code>flop</code>-Klasse auf dem <code>direction</code>-Element gesetzt wird,
  wird die <code>flop</code>-Animation auf dem Pfeil gestartet
</li></ul></div>

</div>
<h1>8. Timer</h1>
<div class="slides">
<div><div>
<h1>8. Timer</h1>
</div>

<ul><li>
 Das Berechnen von RSA kann bei sehr großen Zahlen etwas dauern
</li><li>
 Daher wird nicht mit jeder Änderung eine neue Berechnung gestartet
</li><li>
 Nur wenn nach der letzten Änderung ein gewisses Zeitintervall
  verstrichen ist, wird die Berechnung gestartet
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">let</span> <span class="var">timer</span>;<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>

<ul><li>
 Der Timer wird global vorgehalten
</li></ul></div>

<div><div>
<code>

<span class="macro">@globadd(<span class="name">globals</span>)</span><br/>

<span class="in1"></span><span class="type">const</span> <span class="fn">resetTimer</span> = () =&gt; {<br/>

<span class="in2"></span><span class="var">timer</span> = <span class="num">null</span>;<br/>

<span class="in1"></span>};<br/>

<span class="macro">@end(<span class="name">globals</span>)</span><br/>

</code>
</div>


</div>
<div><div>
<code>

<span class="macro">@replace(<span class="name">queue refresh</span>)</span><br/>

<span class="in1"></span><span class="type">let</span> <span class="fn">fn</span> = <span class="fn">refresh</span>;<br/>

<span class="in1"></span><span class="keyword">if</span> (! <span class="var">timer</span>) {<br/>

<span class="in2"></span><span class="fn">refresh</span>();<br/>

<span class="in2"></span><span class="fn">fn</span> = <span class="fn">resetTimer</span>;<br/>

<span class="in1"></span>} <span class="keyword">else</span> {<br/>

<span class="in2"></span><span class="fn">clearTimeout</span>(<span class="var">timer</span>);<br/>

<span class="in2"></span><span class="macro">@expand(<span class="name">set fields to pending</span>)</span>;<br/>

<span class="in1"></span>}<br/>

<span class="in1"></span><span class="var">timer</span> = <span class="fn">setTimeout</span>(<span class="fn">fn</span>, <span class="num">500</span>);<br/>

<span class="macro">@end(<span class="name">queue refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Wenn es noch keine Änderung gab, wird die Änderung sofort
  durchgeführt
</li><li>
 Und nach Ablauf des Timers wird keine Neuberechnung durchgeführt
</li><li>
 Ansonsten werden die Felder mit Platzhaltern befüllt und der
  bestehende Timer gelöscht
</li><li>
 Dann wird ein neuer Timer gestartet, der die Berechnung triggert
</li><li>
 Der Timeout beträgt eine halbe Sekunde
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">refresh</span>)</span><br/>

<span class="in1"></span><span class="fn">resetTimer</span>();<br/>

<span class="macro">@end(<span class="name">refresh</span>)</span><br/>

</code>
</div>

<ul><li>
 Nach der Neuberechnung wird der Timer zurückgesetzt
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">set fields to pending</span>)</span><br/>

<span class="in1"></span>$<span class="var">public_key_length</span>.<span class="var">innerText</span> = <span class="str">'...'</span>;<br/>

<span class="in1"></span>$<span class="var">public_key</span>.<span class="var">innerText</span> = <span class="str">'...'</span>;<br/>

<span class="in1"></span>$<span class="var">phi</span>.<span class="var">innerText</span> = <span class="str">'...'</span>;<br/>

<span class="in1"></span>$<span class="var">gcd</span>.<span class="var">innerText</span> = <span class="str">'...'</span>;<br/>

<span class="in1"></span>$<span class="var">private_key</span>.<span class="var">innerText</span> = <span class="str">'...'</span>;<br/>

<br/>

<span class="in1"></span><span class="keyword">if</span> (<span class="var">encrypt</span>) {<br/>

<span class="in2"></span>$<span class="var">public_message</span>.<span class="var">value</span> = <span class="str">'...'</span>;<br/>

<span class="in1"></span>} <span class="keyword">else</span> {<br/>

<span class="in2"></span>$<span class="var">private_message</span>.<span class="var">value</span> = <span class="str">'...'</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">set fields to pending</span>)</span><br/>

</code>
</div>

<ul><li>
 Alle berechneten Felder werden mit Platzhaltern befüllt
</li></ul></div>

</div>
<h1>9. Schlussbemerkung</h1>
<div class="slides">
<div><div>
<h1>9. Schlussbemerkung</h1>
</div>

<ul><li>
 Ein paar Kleinigkeiten gibt es noch, um die Web-App fertig
  zu stellen
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="str">Verwendete Bibliothek</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Diese Seite verwendet für die</span><br/>

<span class="in2"></span><span class="str">Rechnung mit großen Zahlen die</span><br/>

<span class="in2"></span><span class="str">Bibliothek</span><br/>

<span class="in2"></span>&lt;<span class="var">a</span> <span class="var">href</span>=<span class="str">"https://peterolson.github.</span><span class="virt"></span><br/><span class="str">com/BigInteger.js/"</span><br/>

<span class="in2"></span>&gt;<span class="str">BigInteger.js</span>&lt;/<span class="var">a</span>&gt;.<br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 In der deutschen Version werden die verwendete Bibliothek
  erwähnt
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">Dadurch kann man auch in JavaScript</span><br/>

<span class="in2"></span><span class="str">mit beliebig großen Zahlen rechnen,</span><br/>

<span class="in2"></span><span class="str">also auch solchen, die real bei</span><br/>

<span class="in2"></span><span class="str">RSA-Anwendungen verwendet werden.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 und was mit ihr berechnet wird
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">h2</span>&gt;<span class="str">Used library</span>&lt;/<span class="var">h2</span>&gt;<br/>

<span class="in1"></span>&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">This page uses the library</span><br/>

<span class="in2"></span>&lt;<span class="var">a</span> <span class="var">href</span>=<span class="str">"https://peterolson.github.</span><span class="virt"></span><br/><span class="str">com/BigInteger.js/"</span>&gt;<span class="type">BigInteger</span>.<span class="var">js</span>&lt;/<span class="var">a</span>&gt;<br/>

<span class="in2"></span><span class="str">to work with big numbers.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;&lt;<span class="var">p</span>&gt;<br/>

<span class="in2"></span><span class="str">As a result, you can calculate</span><br/>

<span class="in2"></span><span class="str">arbitrarily large numbers in</span><br/>

<span class="in2"></span><span class="str">JavaScript, even those that are</span><br/>

<span class="in2"></span><span class="str">actually used in RSA</span><br/>

<span class="in2"></span><span class="str">applications.</span><br/>

<span class="in1"></span>&lt;/<span class="var">p</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Das Gleiche gibt es auch für die englische Version
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container de</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"authors"</span>&gt;&lt;<span class="var">em</span>&gt;<span class="str">CTOAUTHORS:</span><br/>

<span class="in2"></span><span class="str">Timm Knape (Dank an Bernhard Esslinger</span><br/>

<span class="in3"></span><span class="str">für das Review)</span>&lt;/<span class="var">em</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">container de</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Seite endet mit dem Autor-Tag
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">container en</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">div</span> <span class="var">id</span>=<span class="str">"authors"</span>&gt;&lt;<span class="var">em</span>&gt;<span class="str">CTOAUTHORS: Timm</span><br/>

<span class="in2"></span><span class="str">Knape (thanks to Bernhard Esslinger</span><br/>

<span class="in2"></span><span class="str">for the review)</span>&lt;/<span class="var">em</span>&gt;&lt;/<span class="var">div</span>&gt;<br/>

<span class="macro">@end(<span class="name">container en</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch in der englischen Version gibt es das Autor-Tag
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">css</span>)</span><br/>

<span class="in1"></span>#<span class="var">authors</span> {<br/>

<span class="in2"></span><span class="var">margin</span>-<span class="var">top</span>: <span class="num">40px</span>;<br/>

<span class="in1"></span>}<br/>

<span class="macro">@end(<span class="name">css</span>)</span><br/>

</code>
</div>

<ul><li>
 Das Autor-Tag wird etwas vom restlichen Text abgesetzt
</li></ul></div>

<div><div>
<code>

<span class="macro">@def(<span class="name">bootstrap stylesheets</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">link</span> <br/>

<span class="in2"></span><span class="var">rel</span>=<span class="str">"stylesheet"</span><br/>

<span class="in2"></span><span class="var">href</span>=<span class="str">"https://maxcdn.bootstrapcdn.com</span><span class="virt"></span><br/><span class="str">/bootstrap/3.3.7/css/bootstrap.min.css"</span><br/>

<span class="in2"></span><span class="var">integrity</span>=<span class="str">"sha384-BVYiiSIFeK1dGmJRAky</span><span class="virt"></span><br/><span class="str">cuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"</span><br/>

<span class="in2"></span><span class="var">crossorigin</span>=<span class="str">"anonymous"</span><br/>

<span class="in1"></span>&gt;<br/>

<span class="macro">@end(<span class="name">bootstrap stylesheets</span>)</span><br/>

</code>
</div>

<ul><li>
 Die Bootstrap-CSSs werden direkt von einem Content Delivery Network
  eingebunden
</li><li>
 Dies wird nur für den Test verwendet und nicht für die produktive
  Version
</li></ul></div>

<div><div>
<code>

<span class="macro">@add(<span class="name">bootstrap stylesheets</span>)</span><br/>

<span class="in1"></span>&lt;<span class="var">link</span><br/>

<span class="in2"></span><span class="var">rel</span>=<span class="str">"stylesheet"</span><br/>

<span class="in2"></span><span class="var">href</span>=<span class="str">"https://maxcdn.bootstrapcdn.com</span><span class="virt"></span><br/><span class="str">/bootstrap/3.3.7/css/bootstrap-theme.min.css"</span><br/>

<span class="in2"></span><span class="var">integrity</span>=<span class="str">"sha384-rHyoN1iRsVXV4nD0Jut</span><span class="virt"></span><br/><span class="str">lnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"</span><br/>

<span class="in2"></span><span class="var">crossorigin</span>=<span class="str">"anonymous"</span><br/>

<span class="in1"></span>&gt;<br/>

<span class="macro">@end(<span class="name">bootstrap stylesheets</span>)</span><br/>

</code>
</div>

<ul><li>
 Auch das Bootstrap-Thema wird von einem Content Delivery Network
  eingebunden
</li><li>
 Auch dies wird nur für die lokale und nicht für die produktive Version
  verwendet
</li></ul></div>

